<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'int√©gration de l'entreprise dans son environnement | √âconomie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: La structure de l'en-t√™te et des titres de section est modifi√©e pour une meilleure hi√©rarchie et lisibilit√©. Le titre long est d√©plac√© de l'en-t√™te (qui conserve une version courte) vers un bloc de titre principal pro√©minent au d√©but de chaque section. Cette modification r√©sout le probl√®me de responsivit√© du menu et am√©liore la clart√© visuelle. -->
    <!-- Visualization & Content Choices: 
    - Hi√©rarchie des Titres: (Goal: Am√©liorer la Lisibilit√©) Le titre principal de l'application est d√©sormais un <h1> stylis√© ("gros et color√©") au d√©but du contenu, distinct du <h2> de chaque section. Cela r√©sout le probl√®me de l'en-t√™te et structure mieux l'information.
    - Les autres visualisations et interactions sont conserv√©es.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .nav-link {
            transition: all 0.3s ease;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #005A9C;
            border-bottom-color: #005A9C;
        }
        .card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-primary {
            background-color: #005A9C;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #003D6B;
        }
        .btn-secondary {
            background-color: #E2E8F0;
            color: #4A4A4A;
            transition: background-color 0.3s ease, opacity 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #CBD5E1;
        }
        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 40vh;
            max-height: 450px;
        }
        .interactive-diagram-node {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #E2E8F0;
        }
        .interactive-diagram-node:hover {
            border-color: #005A9C;
            transform: scale(1.05);
        }
        .interactive-diagram-node.selected {
            background-color: #E6F0F9;
            border-color: #005A9C;
        }
        .case-solution, .faq-answer {
            display: none;
            border-left: 3px solid #005A9C;
            background-color: #F8FAFC;
        }
        .faq-question {
            cursor: pointer;
        }
        .faq-question .arrow {
            transition: transform 0.3s ease;
        }
        .faq-question.open .arrow {
            transform: rotate(90deg);
        }
        .tab-btn {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            border-bottom-color: #005A9C;
            color: #005A9C;
            font-weight: 600;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        
        .spectrum-point {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .spectrum-point:hover .spectrum-circle {
             transform: scale(1.2);
             background-color: #005A9C;
        }
        .spectrum-point.active .spectrum-label {
            font-weight: 700;
            color: #005A9C;
        }
        .spectrum-point.active .spectrum-circle {
             transform: scale(1.2);
             background-color: #005A9C;
             border-color: #003D6B;
        }
        .spectrum-circle {
            width: 1.25rem;
            height: 1.25rem;
            background-color: white;
            border: 2px solid #9CA3AF;
            border-radius: 9999px;
            transition: all 0.3s ease;
            z-index: 10;
        }
        .spectrum-label {
            position: absolute;
            top: 1.75rem;
            white-space: normal;
            font-size: 0.75rem;
            text-align: center;
            width: 80px;
            left: 50%;
            transform: translateX(-50%);
        }
        @media (min-width: 640px) {
            .spectrum-label {
                width: 150px;
                font-size: 0.875rem;
                white-space: nowrap;
            }
        }

        .quiz-option {
            display: block;
            padding: 0.75rem 1rem;
            border: 1px solid #D1D5DB;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            background-color: #F3F4F6;
        }
        .quiz-option.selected {
            border-color: #005A9C;
            background-color: #E6F0F9;
        }
        .quiz-option.correct {
            border-color: #16A34A;
            background-color: #D1FAE5;
        }
        .quiz-option.incorrect {
            border-color: #DC2626;
            background-color: #FEE2E2;
        }
    </style>
</head>
<body class="antialiased flex flex-col min-h-screen">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-800">Manuel d'√âconomie</h1>
                </div>
                <div class="hidden lg:flex items-baseline space-x-4">
                    <a data-section="introduction" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 active">Introduction</a>
                    <a data-section="ecosysteme" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">√âcosyst√®me</a>
                    <a data-section="marche" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Le March√©</a>
                    <a data-section="limites" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Limites & R√©gulation</a>
                    <a data-section="financement" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Financement</a>
                    <a data-section="cas-pratiques" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Cas Pratiques</a>
                    <a data-section="ressources" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Ressources</a>
                    <a data-section="synthese" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Synth√®se</a>
                    <a data-section="evaluation" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">√âvaluation</a>
                </div>
                <div class="lg:hidden">
                    <button id="burger-btn" class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
                        <span class="sr-only">Ouvrir le menu principal</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile menu, show/hide based on menu state. -->
        <div id="mobile-menu" class="lg:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a data-section="introduction" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Introduction</a>
                <a data-section="ecosysteme" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">√âcosyst√®me</a>
                <a data-section="marche" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Le March√©</a>
                <a data-section="limites" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Limites & R√©gulation</a>
                <a data-section="financement" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Financement</a>
                <a data-section="cas-pratiques" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Cas Pratiques</a>
                <a data-section="ressources" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Ressources</a>
                <a data-section="synthese" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">Synth√®se</a>
                <a data-section="evaluation" class="nav-link-mobile block px-3 py-2 rounded-md text-base font-medium text-gray-700">√âvaluation</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12 flex-grow">
        
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-blue-800">L'int√©gration de l'entreprise dans son environnement</h1>
            <h2 class="mt-2 text-2xl md:text-3xl font-semibold text-gray-600">| √âconomie</h2>
        </div>

        <section id="introduction" class="content-section active">
             <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Introduction Vid√©o</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Pour commencer, cette vid√©o vous pr√©sente les enjeux cl√©s de la th√©matique. Un excellent point de d√©part pour notre parcours.</p>
            </div>
            <div class="card p-4 md:p-6 max-w-4xl mx-auto">
                <div class="relative w-full overflow-hidden" style="padding-top: 56.25%;">
                    <iframe loading="lazy" class="absolute top-0 left-0 w-full h-full border-0 rounded-md" src="https://www.canva.com/design/DAG0cWbu8o8/qBCJPZfw3Andj0usQiKI7w/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen"></iframe>
                </div>
            </div>
        </section>

        <section id="ecosysteme" class="content-section">
            <!-- CONTENU ECOSYSTEME -->
             <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">L'√âcosyst√®me √âconomique</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Une entreprise n'est jamais isol√©e. Elle √©volue au sein d'un vaste r√©seau d'acteurs et de flux. Cette section vous aide √† visualiser ces interd√©pendances fondamentales pour comprendre les forces qui influencent votre activit√©.</p>
            </div>
            
            <div class="card p-6 md:p-8">
                <h4 class="text-2xl font-bold mb-2 text-center text-gray-800">Le Circuit √âconomique Simplifi√©</h4>
                <p class="text-center text-gray-600 mb-6">Cliquez sur un acteur pour isoler ses principaux √©changes et comprendre son r√¥le.</p>
                <div id="economic-circuit" class="relative">
                     <div class="grid grid-cols-2 md:grid-cols-3 gap-8 md:gap-16 items-center">
                        <div data-agent="menages" class="interactive-diagram-node p-4 rounded-lg bg-white text-center shadow">
                            <span class="text-4xl">üè†</span>
                            <p class="font-bold mt-2">M√©nages</p>
                        </div>
                        <div data-agent="entreprises" class="interactive-diagram-node p-4 rounded-lg bg-white text-center shadow selected">
                             <span class="text-4xl">üè¢</span>
                            <p class="font-bold mt-2">Entreprises</p>
                        </div>
                        <div data-agent="etat" class="interactive-diagram-node p-4 rounded-lg bg-white text-center shadow">
                             <span class="text-4xl">üèõÔ∏è</span>
                            <p class="font-bold mt-2">√âtat</p>
                        </div>
                        <div data-agent="banques" class="interactive-diagram-node p-4 rounded-lg bg-white text-center shadow md:col-start-2">
                             <span class="text-4xl">üè¶</span>
                            <p class="font-bold mt-2">Institutions Financi√®res</p>
                        </div>
                        <div data-agent="rdm" class="interactive-diagram-node p-4 rounded-lg bg-white text-center shadow col-span-2 md:col-span-1">
                             <span class="text-4xl">üåç</span>
                            <p class="font-bold mt-2">Reste du Monde</p>
                        </div>
                    </div>
                </div>
                <div id="circuit-info" class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200">
                    <h5 id="agent-title" class="text-xl font-bold mb-2 text-gray-800">Entreprises</h5>
                    <p id="agent-description" class="text-gray-700">
                        Leur fonction principale est la production de biens et services marchands. Pour cela, elles versent des salaires aux m√©nages en √©change de leur travail, paient des imp√¥ts √† l'√âtat, et empruntent aupr√®s des banques pour investir. Elles vendent leur production aux m√©nages, √† l'√âtat et au reste du monde.
                    </p>
                </div>
            </div>
        </section>
        
        <section id="marche" class="content-section">
             <!-- CONTENU MARCHE -->
             <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Le March√© : C≈ìur des √âchanges</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Le march√© est l'ar√®ne de la concurrence. Comprendre son fonctionnement est une chose, mais ma√Ætriser les diff√©rentes "r√®gles du jeu" qui s'y appliquent est la cl√© de la strat√©gie.</p>
            </div>
            
            <div class="flex justify-center border-b border-gray-200 mb-8">
                <button data-tab="mecanisme" class="tab-btn active">2A. Le M√©canisme du Prix</button>
                <button data-tab="structures" class="tab-btn">2B. Structures & Strat√©gies</button>
            </div>

            <div id="mecanisme" class="tab-content active">
                <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold mb-4 text-gray-800 text-center">Simulateur de March√© Guid√©</h4>
                    <div class="text-center mb-6">
                        <p class="text-sm text-gray-600 mb-2 font-medium">Commencez par un sc√©nario pour voir un choc √©conomique en action :</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button class="scenario-btn btn-secondary text-xs font-medium py-1 px-3 rounded-full" data-demand="30" data-supply="0">‚òÄÔ∏è Vague de chaleur (Demande ‚Üó)</button>
                            <button class="scenario-btn btn-secondary text-xs font-medium py-1 px-3 rounded-full" data-demand="0" data-supply="30">üí° Innovation (Offre ‚Üó)</button>
                            <button class="scenario-btn btn-secondary text-xs font-medium py-1 px-3 rounded-full" data-demand="0" data-supply="-30">‚õΩÔ∏è Hausse des co√ªts (Offre ‚Üò)</button>
                            <button class="scenario-btn btn-secondary text-xs font-medium py-1 px-3 rounded-full" data-demand="0" data-supply="0">üîÑ R√©initialiser</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="supplyDemandChart"></canvas>
                    </div>
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="demand-shifter" class="block text-sm font-medium text-gray-700">Choc sur la Demande</label>
                            <input id="demand-shifter" type="range" min="-30" max="30" value="0" step="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2">
                            <div class="flex justify-between text-xs text-gray-500 mt-1"><span>Baisse</span><span>Hausse</span></div>
                        </div>
                        <div>
                            <label for="supply-shifter" class="block text-sm font-medium text-gray-700">Choc sur l'Offre</label>
                            <input id="supply-shifter" type="range" min="-30" max="30" value="0" step="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2">
                             <div class="flex justify-between text-xs text-gray-500 mt-1"><span>Baisse</span><span>Hausse</span></div>
                        </div>
                        <div>
                            <label for="price-slider" class="block text-sm font-medium text-gray-700">Votre Politique de Prix</label>
                            <input id="price-slider" type="range" min="1" max="10" value="5.5" step="0.1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mt-2">
                            <div class="flex justify-between text-xs text-gray-500 mt-1"><span>Prix Bas</span><span>Prix √âlev√©</span></div>
                        </div>
                    </div>
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg border">
                         <h5 class="font-bold text-lg text-gray-800 text-center mb-2">Analyse de la Situation</h5>
                         <div id="market-analysis-text" class="text-sm text-center text-gray-700 space-y-2"></div>
                    </div>
                </div>
            </div>

            <div id="structures" class="tab-content">
                <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold text-gray-800 text-center">Le Spectre de la Concurrence</h4>
                    <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Tous les march√©s ne se ressemblent pas. Le niveau de concurrence d√©termine le pouvoir des entreprises et leurs strat√©gies. Cliquez sur un type de march√© pour l'analyser.</p>
                    
                    <div class="w-full px-4 sm:px-8 mt-12 mb-8 sm:mt-8">
                        <div class="relative h-2 bg-gradient-to-r from-green-300 via-yellow-300 to-red-400 rounded-full">
                            <div id="spectrum-container" class="absolute inset-0">
                                 <div data-structure="cpp" class="spectrum-point active" style="left: 0%;">
                                    <div class="spectrum-circle"></div>
                                    <span class="spectrum-label">Concurrence Pure & Parfaite</span>
                                </div>
                                <div data-structure="monopolistique" class="spectrum-point" style="left: 33.33%;">
                                    <div class="spectrum-circle"></div>
                                    <span class="spectrum-label">Concurrence Monopolistique</span>
                                </div>
                                 <div data-structure="oligopole" class="spectrum-point" style="left: 66.66%;">
                                    <div class="spectrum-circle"></div>
                                    <span class="spectrum-label">Oligopole</span>
                                </div>
                                 <div data-structure="monopole" class="spectrum-point" style="left: 100%;">
                                    <div class="spectrum-circle"></div>
                                    <span class="spectrum-label">Monopole</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="structure-info" class="mt-16 p-6 bg-gray-50 rounded-lg border border-gray-200 transition-all duration-500">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
                    <div class="card p-6">
                        <h5 class="text-xl font-bold mb-4 text-center">üõ°Ô∏è Les Barri√®res √† l'Entr√©e</h5>
                        <p class="text-sm text-gray-600 mb-4">Ce sont des obstacles qui prot√®gent les entreprises d√©j√† pr√©sentes sur un march√© contre l'arriv√©e de nouveaux rivaux.</p>
                        <div class="space-y-3">
                            <p class="text-sm"><strong class="font-semibold">Structurelles :</strong> Li√©es √† la nature du march√© (ex: co√ªts fixes tr√®s √©lev√©s pour cr√©er un r√©seau ferroviaire, √©conomies d'√©chelle).</p>
                            <p class="text-sm"><strong class="font-semibold">Strat√©giques :</strong> Cr√©√©es par les entreprises en place (ex: image de marque tr√®s forte, innovation constante, prix pr√©dateurs).</p>
                            <p class="text-sm"><strong class="font-semibold">R√©glementaires :</strong> Impos√©es par l'√âtat (ex: brevets, licences, normes complexes).</p>
                        </div>
                    </div>
                     <div class="card p-6">
                        <h5 class="text-xl font-bold mb-4 text-center">ü§ù Strat√©gies de Coop√©ration</h5>
                        <p class="text-sm text-gray-600 mb-4">Parfois, les entreprises ont int√©r√™t √† coop√©rer plut√¥t qu'√† s'affronter. Il faut distinguer les formes l√©gales des pratiques ill√©gales.</p>
                        <div class="space-y-3">
                             <p class="text-sm"><strong class="font-semibold text-green-700">Coop√©ration l√©gale :</strong> Alliances, R&D commune, "coop√©tition" (coop√©rer sur un projet tout en restant concurrents).</p>
                             <p class="text-sm"><strong class="font-semibold text-red-700">Coop√©ration ill√©gale (Le Cartel) :</strong> Entente secr√®te entre concurrents pour fixer les prix, se r√©partir le march√© et agir comme un monopole. C'est s√©v√®rement puni par l'Autorit√© de la Concurrence.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="limites" class="content-section">
             <!-- CONTENU LIMITES -->
             <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Limites & R√©gulation</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Parfois, le march√© seul ne suffit pas √† allouer les ressources de mani√®re efficace. Ces "d√©faillances de march√©" justifient souvent une intervention de l'√âtat pour corriger le tir et piloter l'√©conomie.</p>
            </div>
             <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                 <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold mb-4 text-gray-800">L'Asym√©trie d'Information</h4>
                    <p class="text-gray-600 mb-6">Il y a asym√©trie d'information quand, dans un √©change, un des acteurs en sait plus que l'autre. Cela peut mener √† de mauvaises d√©cisions et bloquer le march√©.</p>
                    <div class="space-y-4">
                        <div>
                            <h5 class="font-semibold text-lg">La S√©lection Adverse</h5>
                            <p class="text-gray-600">C'est l'asym√©trie <span class="font-bold">avant</span> la signature du contrat. L'acheteur ne connaissant pas la qualit√© r√©elle du produit, les produits de mauvaise qualit√© risquent de chasser les bons.</p>
                            <p class="mt-2 text-sm italic bg-yellow-100 p-3 rounded-lg"><strong>Exemple :</strong> Sur le march√© des voitures d'occasion, un acheteur a du mal √† distinguer une bonne voiture d'une "guimbarde". Il proposera un prix moyen, trop bas pour les vendeurs de bonnes voitures qui se retirent. √Ä la fin, il ne reste que les mauvaises affaires.</p>
                        </div>
                         <div>
                            <h5 class="font-semibold text-lg">L'Al√©a Moral</h5>
                            <p class="text-gray-600">C'est l'asym√©trie <span class="font-bold">apr√®s</span> la signature du contrat. Une personne, se sentant prot√©g√©e par le contrat, change de comportement et prend plus de risques.</p>
                            <p class="mt-2 text-sm italic bg-green-100 p-3 rounded-lg"><strong>Exemple :</strong> Une personne assur√©e "tous risques" pour sa voiture pourrait √™tre moins prudente au volant, sachant qu'en cas d'accident, l'assurance couvrira les frais.</p>
                        </div>
                    </div>
                </div>
                 <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold mb-4 text-gray-800">Les Externalit√©s : Une Analyse Guid√©e</h4>
                    <p class="text-gray-600 mb-4 text-center">Cliquez sur un cas pour voir comment les actions d'un agent impactent les autres, et comment le co√ªt (ou b√©n√©fice) social diff√®re du co√ªt priv√©.</p>
                    <div class="text-center mb-4">
                        <button id="neg-ext-btn" class="btn-secondary px-4 py-2 rounded-md text-sm font-medium">Analyser : L'Usine Polluante</button>
                        <button id="pos-ext-btn" class="btn-secondary px-4 py-2 rounded-md text-sm font-medium ml-2">Analyser : L'Apiculteur</button>
                    </div>
                    <div class="chart-container" style="height:250px; max-height:300px;">
                        <canvas id="externalitiesChart"></canvas>
                    </div>
                    <div id="externalities-analysis" class="mt-4 p-4 bg-gray-50 rounded-lg border min-h-[120px]">
                        <p class="text-gray-500 text-center">Choisissez un sc√©nario √† analyser.</p>
                    </div>
                </div>
            </div>
            <div class="card p-6 md:p-8">
                <h4 class="text-2xl font-bold mb-4 text-gray-800 text-center">Le Pilotage de l'√âconomie par l'√âtat</h4>
                <p class="text-center text-gray-600 mb-6 max-w-3xl mx-auto">Pour atteindre ses objectifs (croissance, emploi, stabilit√© des prix), l'√âtat ne se contente pas de r√©guler. Il dispose de deux grands leviers d'action pour influencer la conjoncture √©conomique.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-6">
                    <div class="p-6 rounded-lg bg-blue-50 border border-blue-200">
                        <h5 class="font-bold text-xl text-blue-800 mb-2">üí∞ Politique Budg√©taire</h5>
                        <p class="text-sm text-blue-900 mb-3">Men√©e par le <strong>Gouvernement</strong>. Elle utilise le budget de l'√âtat (d√©penses et imp√¥ts) pour agir sur l'activit√©.</p>
                        <p class="font-semibold">Relance :</p>
                        <p class="text-sm mb-2">‚ÜóÔ∏è D√©penses publiques ou ‚ÜòÔ∏è Imp√¥ts pour stimuler la consommation et l'investissement.</p>
                        <p class="font-semibold">Rigueur / Aust√©rit√© :</p>
                        <p class="text-sm">‚ÜòÔ∏è D√©penses publiques ou ‚ÜóÔ∏è Imp√¥ts pour freiner l'inflation et r√©duire la dette.</p>
                    </div>
                    <div class="p-6 rounded-lg bg-green-50 border border-green-200">
                        <h5 class="font-bold text-xl text-green-800 mb-2">üìà Politique Mon√©taire</h5>
                        <p class="text-sm text-green-900 mb-3">Men√©e par la <strong>Banque Centrale Europ√©enne (BCE)</strong>. Elle utilise les taux d'int√©r√™t pour r√©guler la quantit√© de monnaie en circulation.</p>
                        <p class="font-semibold">Expansionniste :</p>
                        <p class="text-sm mb-2">‚ÜòÔ∏è Taux d'int√©r√™t pour rendre le cr√©dit moins cher et encourager l'emprunt et l'investissement.</p>
                        <p class="font-semibold">Restrictive :</p>
                        <p class="text-sm">‚ÜóÔ∏è Taux d'int√©r√™t pour rendre le cr√©dit plus cher afin de lutter contre l'inflation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="financement" class="content-section">
            <!-- CONTENU FINANCEMENT -->
             <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Le Financement de l'√âconomie</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Pour investir, innover et se d√©velopper, une entreprise a besoin de capitaux. Elle peut se les procurer de deux mani√®res principales : en passant par les banques ou en s'adressant directement aux march√©s financiers.</p>
            </div>
            <div class="card p-6 md:p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 divide-y md:divide-y-0 md:divide-x divide-gray-200">
                    <div class="pt-4 md:pt-0 pr-0 md:pr-8">
                        <h4 class="text-2xl font-bold mb-4 text-gray-800 text-center"><span class="text-4xl mr-2">üè¶</span>Financement Indirect</h4>
                        <p class="text-gray-600 mb-4">Aussi appel√© financement <span class="font-bold">interm√©di√©</span>. L'entreprise ne rencontre pas directement les √©pargnants. Elle s'adresse √† un interm√©diaire, la banque, qui collecte l'√©pargne des m√©nages pour la transformer en cr√©dits pour les entreprises.</p>
                        <ul class="space-y-2 list-disc list-inside">
                            <li><strong>Acteur cl√© :</strong> La banque.</li>
                            <li><strong>Instrument principal :</strong> Le cr√©dit bancaire.</li>
                            <li><strong>Avantage :</strong> Accessible aux PME, analyse de risque par un expert.</li>
                            <li><strong>Inconv√©nient :</strong> Co√ªt (taux d'int√©r√™t), garanties exig√©es.</li>
                        </ul>
                    </div>
                    <div class="pt-8 md:pt-0 pl-0 md:pl-8">
                        <h4 class="text-2xl font-bold mb-4 text-gray-800 text-center"><span class="text-4xl mr-2">üìà</span>Financement Direct</h4>
                         <p class="text-gray-600 mb-4">L'entreprise se finance directement sur les <span class="font-bold">march√©s financiers</span> en √©mettant des titres (actions, obligations) que les √©pargnants (m√©nages, autres entreprises, investisseurs) peuvent acheter.</p>
                         <div class="mt-4">
                            <h5 class="font-bold">√âmission d'Actions :</h5>
                            <p class="text-sm text-gray-600">L'entreprise vend une partie de son capital. L'acheteur devient co-propri√©taire et re√ßoit une part des b√©n√©fices (dividendes).</p>
                        </div>
                         <div class="mt-4">
                            <h5 class="font-bold">√âmission d'Obligations :</h5>
                            <p class="text-sm text-gray-600">L'entreprise emprunte de l'argent en vendant des titres de dette. L'acheteur est un cr√©ancier qui sera rembours√© avec int√©r√™ts.</p>
                        </div>
                        <div class="mt-6 p-4 rounded-lg bg-gray-50 border">
                           <h5 class="font-semibold text-center mb-2">Action vs. Obligation : Le couple Risque / Rendement</h5>
                           <div class="text-xs grid grid-cols-2 gap-2 text-center">
                               <div>
                                   <p class="font-bold">ACTION</p>
                                   <p class="text-red-600">Risque √âlev√©</p>
                                   <p class="text-green-600">Rendement Potentiel √âlev√©</p>
                               </div>
                               <div>
                                   <p class="font-bold">OBLIGATION</p>
                                   <p class="text-green-600">Risque Faible</p>
                                   <p class="text-red-600">Rendement Faible</p>
                               </div>
                           </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="cas-pratiques" class="content-section">
            <!-- CONTENU CAS PRATIQUES -->
            <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Cas Pratiques : Le Cas du Manager</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">La th√©orie, c'est bien. La pratique, c'est mieux ! Mettez vos connaissances √† l'√©preuve avec ces mini-cas inspir√©s de situations r√©elles en unit√© commerciale.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                 <div class="card p-6 flex flex-col">
                    <h4 class="text-lg font-bold mb-2">Cas 1 : L'impact d'une d√©cision de l'√âtat</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">Vous √™tes manager d'un supermarch√©. Le gouvernement annonce une politique de relance en augmentant de 5% les allocations familiales et en versant une "prime √©nergie" aux m√©nages les plus modestes.</p>
                    <div class="p-4 bg-blue-100 rounded-md text-blue-900 mb-4">
                        <p class="font-semibold">Votre mission :</p>
                        <p class="text-sm">Quel impact direct anticipez-vous sur votre chiffre d'affaires ? Sur quels rayons en particulier devriez-vous concentrer vos efforts (stocks, promotions) ?</p>
                    </div>
                    <button class="toggle-solution btn-secondary text-sm font-medium py-2 px-4 rounded-md w-full">R√©v√©ler l'analyse</button>
                    <div class="case-solution mt-4 p-4 text-sm">
                        <p><strong class="font-semibold">Analyse :</strong> C'est un exemple de <strong class="text-blue-700">politique budg√©taire de relance</strong>. Le revenu disponible des m√©nages va augmenter, ce qui devrait stimuler la <strong class="text-red-700">demande</strong>.</p>
                        <ul class="list-disc list-inside mt-2">
                            <li><strong>Impact g√©n√©ral :</strong> Hausse probable du CA.</li>
                            <li><strong>Rayons √† surveiller :</strong>
                                <ul class="list-inside ml-4">
                                    <li>- Produits de grande consommation (alimentation, hygi√®ne).</li>
                                    <li>- Rayon pu√©riculture (li√©e aux allocations familiales).</li>
                                    <li>- Produits plaisir/non essentiels qui pourraient b√©n√©ficier du surplus de revenu.</li>
                                </ul>
                            </li>
                            <li><strong>Action :</strong> Anticiper les commandes, adapter les stocks et proposer des offres attractives sur ces rayons cibles.</li>
                        </ul>
                    </div>
                </div>
                
                 <div class="card p-6 flex flex-col">
                    <h4 class="text-lg font-bold mb-2">Cas 2 : R√©agir √† la concurrence</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">Vous √™tes g√©rant d'un fast-food "premium". Un nouveau concurrent s'installe √† proximit√© et propose des menus similaires, mais 15% moins chers. Vous observez une l√©g√®re baisse de votre fr√©quentation.</p>
                    <div class="p-4 bg-blue-100 rounded-md text-blue-900 mb-4">
                        <p class="font-semibold">Votre mission :</p>
                        <p class="text-sm">Quelle est votre strat√©gie de prix ? Faut-il s'aligner ? Maintenir le prix ? Comment utiliser les concepts √©conomiques pour d√©cider ?</p>
                    </div>
                    <button class="toggle-solution btn-secondary text-sm font-medium py-2 px-4 rounded-md w-full">R√©v√©ler l'analyse</button>
                    <div class="case-solution mt-4 p-4 text-sm">
                        <p><strong class="font-semibold">Analyse :</strong> Vous √™tes en situation de <strong class="text-blue-700">concurrence monopolistique</strong> (produits diff√©renci√©s). La question cl√© est l'<strong class="text-red-700">√©lasticit√©-prix</strong> de votre demande.</p>
                        <ul class="list-disc list-inside mt-2">
                            <li><strong>Option 1 (s'aligner) :</strong> Risqu√© si vos co√ªts sont plus √©lev√©s. Vous risquez une guerre des prix destructrice.</li>
                            <li><strong>Option 2 (maintenir) :</strong> La meilleure strat√©gie si votre demande est <strong class="text-red-700">in√©lastique</strong>. Pour cela, il faut renforcer la <strong class="text-blue-700">diff√©renciation</strong>.</li>
                            <li><strong>Action :</strong> Ne pas baisser les prix, mais communiquer agressivement sur vos points forts (qualit√© des ingr√©dients, exp√©rience client, programme de fid√©lit√©). Le but est de justifier l'√©cart de prix et de rendre vos clients moins sensibles au prix du concurrent.</li>
                        </ul>
                    </div>
                </div>

                <div class="card p-6 flex flex-col">
                    <h4 class="text-lg font-bold mb-2">Cas 3 : Vaincre la m√©fiance du client</h4>
                    <p class="text-sm text-gray-600 mb-4 flex-grow">Vous lancez une activit√© de vente de smartphones reconditionn√©s sur internet. Le march√© est porteur, mais vous constatez que beaucoup de visiteurs h√©sitent √† acheter, craignant des d√©fauts cach√©s ou une batterie d√©faillante.</p>
                    <div class="p-4 bg-blue-100 rounded-md text-blue-900 mb-4">
                        <p class="font-semibold">Votre mission :</p>
                        <p class="text-sm">Quel probl√®me √©conomique majeur rencontrez-vous ? Quelles actions concr√®tes mettre en place pour rassurer les clients et d√©clencher l'achat ?</p>
                    </div>
                    <button class="toggle-solution btn-secondary text-sm font-medium py-2 px-4 rounded-md w-full">R√©v√©ler l'analyse</button>
                    <div class="case-solution mt-4 p-4 text-sm">
                        <p><strong class="font-semibold">Analyse :</strong> C'est un cas typique d'<strong class="text-yellow-700">asym√©trie d'information</strong> menant √† la <strong class="text-yellow-700">s√©lection adverse</strong>. Le client ne peut pas v√©rifier la qualit√© avant l'achat, il a donc peur de tomber sur un mauvais produit.</p>
                        <ul class="list-disc list-inside mt-2">
                           <li><strong>Objectif :</strong> R√©duire cette asym√©trie en envoyant des signaux de qualit√© cr√©dibles.</li>
                           <li><strong>Actions concr√®tes :</strong>
                                <ul class="list-inside ml-4">
                                    <li>- Proposer une garantie longue (ex: 12 ou 24 mois).</li>
                                    <li>- Mettre en place un label "Certifi√© Reconditionn√©" avec une checklist d√©taill√©e des points de contr√¥le.</li>
                                    <li>- Offrir une politique de retour "satisfait ou rembours√©" de 30 jours.</li>
                                    <li>- Afficher de mani√®re transparente les avis clients v√©rifi√©s.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="ressources" class="content-section">
            <!-- CONTENU RESSOURCES -->
            <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Ressources P√©dagogiques</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Utilisez cette section pour rechercher rapidement une d√©finition ou pour revoir les r√©ponses aux questions les plus fr√©quentes sur les concepts √©conomiques cl√©s.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold mb-4 text-gray-800">Glossaire Interactif</h4>
                    <input type="text" id="glossary-search" placeholder="Rechercher un terme..." class="w-full px-4 py-2 border border-gray-300 rounded-md mb-6 focus:ring-blue-500 focus:border-blue-500">
                    <div id="glossary-list" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                    </div>
                </div>
                <div class="card p-6 md:p-8">
                    <h4 class="text-2xl font-bold mb-4 text-gray-800">Foire Aux Questions (FAQ)</h4>
                    <div id="faq-container" class="space-y-4">
                    </div>
                </div>
            </div>
        </section>

        <section id="synthese" class="content-section">
            <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Synth√®se : La Carte Mentale du Cours</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Voici une vue d'ensemble de tous les concepts abord√©s. Utilisez cette carte mentale interactive pour r√©viser les notions et visualiser les liens qui les unissent.</p>
            </div>
            <div class="card p-4 md:p-6">
                 <div class="relative w-full overflow-hidden" style="padding-top: 62.5%;">
                    <iframe src='https://www.xmind.app/embed/gUpSeP/' class="absolute top-0 left-0 w-full h-full border-0 rounded-md" frameborder='0' scrolling='no' allowfullscreen="true"></iframe>
                </div>
            </div>
        </section>

        <section id="evaluation" class="content-section">
            <div class="text-center mb-12">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900">√âvaluation Formative</h3>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Le moment est venu de tester vos connaissances ! R√©pondez aux questions pour valider votre compr√©hension et ancrer les concepts cl√©s.</p>
            </div>

            <div id="quiz-container" class="card p-6 md:p-8 max-w-4xl mx-auto">
                <div id="quiz-start-screen">
                    <h4 class="text-2xl font-bold text-center mb-4">Quiz : L'entreprise et son environnement</h4>
                    <p class="text-center text-gray-600 mb-6">Ce quiz de 15 questions va vous permettre de faire le point sur vos acquis. L'objectif est d'atteindre un score de 75% de bonnes r√©ponses. Bonne chance !</p>
                    <div class="text-center">
                        <button id="start-quiz-btn" class="btn-primary px-8 py-3 rounded-md font-semibold">D√©marrer l'√©valuation</button>
                    </div>
                </div>

                <div id="quiz-main-screen" class="hidden">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span id="quiz-progress-text" class="text-sm font-semibold text-gray-700">Question 1 / 15</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div id="quiz-progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 7%"></div>
                        </div>
                    </div>

                    <div id="question-card">
                        <div class="flex justify-between items-center mb-2">
                            <h5 class="text-xl font-bold text-gray-800 mr-4" id="question-text"></h5>
                            <span id="question-difficulty" class="text-xs font-medium px-2.5 py-0.5 rounded-full flex-shrink-0"></span>
                        </div>
                        <div class="mb-4">
                             <button id="show-hint-btn" class="text-sm text-blue-600 hover:underline">üí° Afficher un indice</button>
                             <div id="hint-container" class="hidden mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md text-sm text-yellow-800"></div>
                        </div>
                        
                        <div id="answer-options" class="space-y-2"></div>
                        
                        <div id="feedback-container" class="mt-4 p-4 rounded-md text-sm hidden"></div>
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button id="check-answer-btn" class="btn-primary px-6 py-2 rounded-md font-semibold">Valider</button>
                        <button id="next-question-btn" class="btn-primary px-6 py-2 rounded-md font-semibold hidden">Suivant</button>
                    </div>
                </div>

                <div id="quiz-results-screen" class="hidden text-center">
                    <h4 class="text-2xl font-bold mb-4">R√©sultats du Quiz</h4>
                    <p class="text-lg mb-2">Votre score final est de :</p>
                    <p id="final-score" class="text-5xl font-bold mb-4"></p>
                    <div class="w-full bg-gray-200 rounded-full h-4 max-w-md mx-auto mb-4">
                        <div id="final-score-bar" class="h-4 rounded-full" style="width: 0%;"></div>
                    </div>
                    <p id="results-feedback" class="text-gray-700 mb-6 max-w-xl mx-auto"></p>
                    <button id="restart-quiz-btn" class="btn-secondary px-8 py-3 rounded-md font-semibold">Recommencer</button>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-gray-200 mt-auto">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm text-gray-500">
            <p>&copy; 2025-2026 Manuel Interactif d'√âconomie. Tous droits r√©serv√©s.</p>
        </div>
    </footer>

    <button id="back-to-top" class="hidden fixed bottom-5 right-5 bg-blue-600 text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-2xl hover:bg-blue-700 transition-all">
        ‚Üë
    </button>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // LOGIQUE DE NAVIGATION ET CONTENU EXISTANT
            const agentInfo = {
                menages: { title: "M√©nages", description: "Leur fonction principale est la consommation. Ils offrent leur travail aux entreprises et √† l'√âtat en √©change d'un revenu (salaire, prestations). Ils utilisent ce revenu pour consommer, √©pargner (aupr√®s des banques) et payer des imp√¥ts." },
                entreprises: { title: "Entreprises", description: "Leur fonction principale est la production de biens et services marchands. Pour cela, elles versent des salaires aux m√©nages, paient des imp√¥ts √† l'√âtat, et empruntent aupr√®s des banques pour investir. Elles vendent leur production aux autres agents." },
                etat: { title: "√âtat (Administrations Publiques)", description: "Il produit des services non marchands (√©ducation, s√©curit√©), et redistribue les richesses (allocations). Il se finance par les pr√©l√®vements obligatoires (imp√¥ts, taxes) et peut √©galement piloter l'√©conomie via ses politiques budg√©taire et mon√©taire." },
                banques: { title: "Institutions Financi√®res", description: "Leur r√¥le est l'interm√©diation. Elles collectent l'√©pargne des agents √† capacit√© de financement (m√©nages) et accordent des cr√©dits aux agents √† besoin de financement (entreprises, m√©nages)." },
                rdm: { title: "Reste du Monde", description: "Cet agent regroupe tous les acteurs √©conomiques √©trangers. Il permet les √©changes internationaux : les importations (achats de biens/services √† l'√©tranger) et les exportations (ventes de biens/services √† l'√©tranger)." }
            };
            const circuitNodes = document.querySelectorAll('.interactive-diagram-node');
            const agentTitle = document.getElementById('agent-title');
            const agentDescription = document.getElementById('agent-description');

            circuitNodes.forEach(node => {
                node.addEventListener('click', () => {
                    circuitNodes.forEach(n => n.classList.remove('selected'));
                    node.classList.add('selected');
                    const agent = node.dataset.agent;
                    agentTitle.textContent = agentInfo[agent].title;
                    agentDescription.textContent = agentInfo[agent].description;
                });
            });


            const sections = document.querySelectorAll('.content-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const burgerBtn = document.getElementById('burger-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.nav-link-mobile');

            function showSection(sectionId) {
                sections.forEach(section => { section.id === sectionId ? section.classList.add('active') : section.classList.remove('active'); });
                navLinks.forEach(link => { link.dataset.section === sectionId ? link.classList.add('active') : link.classList.remove('active'); });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            navLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); showSection(e.target.dataset.section); }); });
            
            burgerBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection(e.target.dataset.section);
                    mobileMenu.classList.add('hidden');
                });
            });
            
            const solutionToggles = document.querySelectorAll('.toggle-solution');
            solutionToggles.forEach(button => {
                button.addEventListener('click', () => {
                    const solutionDiv = button.nextElementSibling;
                    const isVisible = solutionDiv.style.display === 'block';
                    solutionDiv.style.display = isVisible ? 'none' : 'block';
                    button.textContent = isVisible ? "R√©v√©ler l'analyse" : "Cacher l'analyse";
                });
            });
            
            let supplyDemandChart;
            const priceSlider = document.getElementById('price-slider');
            const demandShifter = document.getElementById('demand-shifter');
            const supplyShifter = document.getElementById('supply-shifter');
            const marketAnalysisText = document.getElementById('market-analysis-text');
            
            function createSupplyDemandChart() {
                if(!document.getElementById('supplyDemandChart')) return;
                const ctx = document.getElementById('supplyDemandChart').getContext('2d');
                
                supplyDemandChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array.from({ length: 100 }, (_, i) => ((i + 1) * 0.1).toFixed(1)),
                        datasets: [
                            { label: 'Demande', borderColor: '#DC2626', fill: false, tension: 0.1, data: [] }, 
                            { label: 'Offre', borderColor: '#16A34A', fill: false, tension: 0.1, data: [] }
                        ]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: { x: { title: { display: true, text: 'Prix (‚Ç¨)' } }, y: { title: { display: true, text: 'Quantit√©' }, min: 0, max: 150 } },
                        plugins: { tooltip: { mode: 'index', intersect: false }, legend: { position: 'top' }, annotation: { annotations: {} } }
                    }
                });
                updateMarketChart();
            }

            function updateMarketChart() {
                if(!supplyDemandChart || !marketAnalysisText) return;
                const demandShift = parseFloat(demandShifter.value);
                const supplyShift = parseFloat(supplyShifter.value);
                const currentPrice = parseFloat(priceSlider.value);

                const demandData = supplyDemandChart.data.labels.map(p => Math.max(0, 100 - (p * 9) + demandShift));
                const supplyData = supplyDemandChart.data.labels.map(p => Math.max(0, 10 + (p * 9) - supplyShift));

                supplyDemandChart.data.datasets[0].data = demandData;
                supplyDemandChart.data.datasets[1].data = supplyData;

                let equilibriumPrice = null, equilibriumQty = null;
                for(let i = 0; i < demandData.length; i++) {
                    if(demandData[i] <= supplyData[i]) {
                        equilibriumPrice = parseFloat(supplyDemandChart.data.labels[i]);
                        equilibriumQty = demandData[i];
                        break;
                    }
                }
                
                let analysisHTML = '';
                if (demandShift > 0) analysisHTML += `<p>üìà <strong>Choc de Demande Positif :</strong> La demande augmente (ex: produit √† la mode). La courbe de demande se d√©place √† droite.</p>`;
                else if (demandShift < 0) analysisHTML += `<p>üìâ <strong>Choc de Demande N√©gatif :</strong> La demande baisse (ex: baisse du revenu). La courbe de demande se d√©place √† gauche.</p>`;

                if (supplyShift > 0) analysisHTML += `<p>üè≠ <strong>Choc d'Offre Positif :</strong> L'offre augmente (ex: baisse des co√ªts de production). La courbe d'offre se d√©place √† droite.</p>`;
                else if (supplyShift < 0) analysisHTML += `<p>‚ö†Ô∏è <strong>Choc d'Offre N√©gatif :</strong> L'offre diminue (ex: hausse des mati√®res premi√®res). La courbe d'offre se d√©place √† gauche.</p>`;

                if (demandShift === 0 && supplyShift === 0) analysisHTML += '<p>Situation de march√© initiale sans choc externe.</p>';

                if(equilibriumPrice !== null) {
                    analysisHTML += `<p class="font-semibold text-blue-800 pt-2 border-t mt-2">Le nouvel √©quilibre du march√© est un prix de <strong>${equilibriumPrice.toFixed(2)}‚Ç¨</strong> pour <strong>${Math.round(equilibriumQty)}</strong> unit√©s.</p>`;
                    
                    const qtyAtCurrentPriceDemand = Math.max(0, 100 - (currentPrice * 9) + demandShift);
                    const qtyAtCurrentPriceSupply = Math.max(0, 10 + (currentPrice * 9) - supplyShift);

                    if (Math.abs(currentPrice - equilibriumPrice) < 0.1) {
                        analysisHTML += `<p class="text-green-600 font-bold">Votre prix de ${currentPrice.toFixed(2)}‚Ç¨ est √† l'√©quilibre. Le march√© est satisfait.</p>`;
                    } else if (currentPrice < equilibriumPrice) {
                        analysisHTML += `<p class="text-red-600 font-bold">√Ä votre prix de ${currentPrice.toFixed(2)}‚Ç¨, il y a une P√âNURIE. La demande (${Math.round(qtyAtCurrentPriceDemand)}) est plus forte que l'offre (${Math.round(qtyAtCurrentPriceSupply)}).</p>`;
                    } else {
                        analysisHTML += `<p class="text-yellow-700 font-bold">√Ä votre prix de ${currentPrice.toFixed(2)}‚Ç¨, il y a un EXC√âDENT. L'offre (${Math.round(qtyAtCurrentPriceSupply)}) est plus forte que la demande (${Math.round(qtyAtCurrentPriceDemand)}).</p>`;
                    }
                    
                    supplyDemandChart.options.plugins.annotation.annotations = {
                        equilibriumPoint: { type: 'point', xValue: equilibriumPrice, yValue: equilibriumQty, backgroundColor: 'rgba(0, 90, 156, 0.8)', radius: 6, borderColor: 'white', borderWidth: 2 },
                        priceLine: { type: 'line', xMin: 0, xMax: 10, yMin: equilibriumQty, yMax: equilibriumQty, borderColor: 'rgba(0, 90, 156, 0.5)', borderWidth: 1, borderDash: [6, 6] },
                        currentPriceLine: { type: 'line', xMin: currentPrice, xMax: currentPrice, yMin: 0, yMax: 150, borderColor: '#4A4A4A', borderWidth: 2, label: { content: `Votre Prix: ${currentPrice.toFixed(2)}‚Ç¨`, enabled: true, position: 'start' } }
                    };

                } else {
                     analysisHTML += `<p class="font-semibold text-red-800 pt-2 border-t mt-2">Pas de point d'√©quilibre trouv√© dans cette configuration de march√©.</p>`;
                }
                marketAnalysisText.innerHTML = analysisHTML;
                supplyDemandChart.update();
            }

            if(priceSlider) priceSlider.addEventListener('input', updateMarketChart);
            if(demandShifter) demandShifter.addEventListener('input', updateMarketChart);
            if(supplyShifter) supplyShifter.addEventListener('input', updateMarketChart);

            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    demandShifter.value = btn.dataset.demand;
                    supplyShifter.value = btn.dataset.supply;
                    updateMarketChart();
                });
            });


            let externalitiesChart;
            const negExtBtn = document.getElementById('neg-ext-btn');
            const posExtBtn = document.getElementById('pos-ext-btn');
            const externalitiesAnalysis = document.getElementById('externalities-analysis');
            let isAnimating = false;

            function createExternalitiesChart() {
                if(!document.getElementById('externalitiesChart')) return;
                 const ctx = document.getElementById('externalitiesChart').getContext('2d');
                 externalitiesChart = new Chart(ctx, {
                    type: 'bar',
                    data: { labels: [], datasets: [] },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: { x: { stacked: false }, y: { stacked: true, beginAtZero: true, title: {display: true, text: 'Co√ªt / B√©n√©fice'} } },
                        plugins: { title: { display: true, text: 'Analyse des Externalit√©s' }, legend: { display: true } },
                        animation: { duration: 800 }
                    }
                });
            }
            
            function animateExternalitiesChart(type) {
                if (isAnimating) return;
                isAnimating = true;
                negExtBtn.disabled = true;
                posExtBtn.disabled = true;

                if (type === 'negative') {
                    setTimeout(() => {
                        externalitiesChart.data = {
                            labels: ['Co√ªt pour l\'entreprise', 'Co√ªt pour la soci√©t√©'],
                            datasets: [{ label: 'Co√ªt Priv√© (Production)', data: [100, 100], backgroundColor: '#3B82F6' }]
                        };
                        externalitiesChart.options.plugins.title.text = "√âtape 1 : Le Co√ªt Priv√©";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML = `<p class="font-semibold">1. L'usine calcule son co√ªt de production (salaires, machines). C'est son <strong>co√ªt priv√©</strong>, celui qu'elle prend en compte pour fixer son prix.</p>`;
                    }, 0);

                    setTimeout(() => {
                        externalitiesChart.data.datasets.push({ label: 'Co√ªt Externe (Pollution)', data: [0, 50], backgroundColor: '#EF4444' });
                        externalitiesChart.options.plugins.title.text = "√âtape 2 : Le Co√ªt Externe appara√Æt";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML += `<p class="mt-2">2. Mais son activit√© g√©n√®re de la pollution. C'est un <strong>co√ªt externe</strong> support√© par la collectivit√© (sant√©, nettoyage) que l'usine, elle, ne paie pas.</p>`;
                    }, 1200);

                    setTimeout(() => {
                        externalitiesChart.options.plugins.title.text = "Conclusion : Co√ªt Social > Co√ªt Priv√©";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML += `<p class="mt-2 font-bold text-blue-800">3. Le <strong>co√ªt social</strong> (priv√© + externe) est donc sup√©rieur au co√ªt priv√©. Le march√©, seul, conduit √† une <strong>surproduction</strong> de pollution.</p>`;
                        isAnimating = false; negExtBtn.disabled = false; posExtBtn.disabled = false;
                    }, 2400);

                } else { 
                    setTimeout(() => {
                        externalitiesChart.data = {
                            labels: ['B√©n√©fice pour l\'apiculteur', 'B√©n√©fice pour l\'agriculteur'],
                            datasets: [{ label: 'B√©n√©fice Priv√© (Vente de miel)', data: [100, 0], backgroundColor: '#10B981' }]
                        };
                        externalitiesChart.options.plugins.title.text = "√âtape 1 : Le B√©n√©fice Priv√©";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML = `<p class="font-semibold">1. L'apiculteur vend son miel. C'est son <strong>b√©n√©fice priv√©</strong>, le seul gain qu'il prend en compte.</p>`;
                    }, 0);
                    
                    setTimeout(() => {
                        externalitiesChart.data.datasets.push({ label: 'B√©n√©fice Externe (Pollinisation)', data: [0, 40], backgroundColor: '#FBBF24' });
                        externalitiesChart.options.plugins.title.text = "√âtape 2 : Le B√©n√©fice Externe appara√Æt";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML += `<p class="mt-2">2. Mais ses abeilles pollinisent gratuitement les vergers de son voisin. C'est un <strong>b√©n√©fice externe</strong> pour lequel l'apiculteur n'est pas r√©mun√©r√©.</p>`;
                    }, 1200);

                    setTimeout(() => {
                        externalitiesChart.options.plugins.title.text = "Conclusion : B√©n√©fice Social > B√©n√©fice Priv√©";
                        externalitiesChart.update();
                        externalitiesAnalysis.innerHTML += `<p class="mt-2 font-bold text-green-800">3. Le <strong>b√©n√©fice social</strong> (priv√© + externe) est donc sup√©rieur au b√©n√©fice priv√©. Le march√©, seul, conduit √† une <strong>sous-production</strong> de ruches.</p>`;
                        isAnimating = false; negExtBtn.disabled = false; posExtBtn.disabled = false;
                    }, 2400);
                }
            }


            if(negExtBtn) negExtBtn.addEventListener('click', () => animateExternalitiesChart('negative'));
            if(posExtBtn) posExtBtn.addEventListener('click', () => animateExternalitiesChart('positive'));


            const glossaryData = [
                { term: "Agent √âconomique", definition: "Individu ou groupe constituant un centre de d√©cision √©conomique. Cat√©gories : M√©nages, Entreprises, √âtat, Institutions Financi√®res, Reste du Monde." },
                { term: "Al√©a Moral", definition: "D√©faillance de march√© (ex-post) o√π une partie, prot√©g√©e par un contrat, change de comportement au d√©triment de l'autre (ex: un assur√© prenant plus de risques)." },
                { term: "Asym√©trie d'Information", definition: "D√©faillance de march√© o√π une partie d√©tient plus d'informations que l'autre, minant la confiance." },
                { term: "Barri√®res √† l'Entr√©e", definition: "Obstacles qui prot√®gent les entreprises en place de nouveaux concurrents. Peuvent √™tre structurelles, strat√©giques ou r√©glementaires." },
                { term: "Cartel", definition: "Entente ill√©gale entre concurrents pour fixer les prix et agir comme un monopole." },
                { term: "Circuit √âconomique", definition: "Repr√©sentation des flux r√©els et mon√©taires entre les agents √©conomiques." },
                { term: "Concurrence Monopolistique", definition: "Structure de march√© avec de nombreux vendeurs proposant des produits diff√©renci√©s, leur donnant un certain pouvoir de prix." },
                { term: "Concurrence Pure et Parfaite (CPP)", definition: "Mod√®le th√©orique de march√© o√π les entreprises sont 'price takers' (preneuses de prix)." },
                { term: "Cr√©ation Mon√©taire", definition: "Pouvoir des banques de cr√©er de la monnaie scripturale 'ex nihilo' en accordant des cr√©dits." },
                { term: "Externalit√©", definition: "Impact de l'action d'un agent sur un autre sans compensation mon√©taire (n√©gative : pollution ; positive : innovation)." },
                { term: "Financement Direct", definition: "Financement sur les march√©s financiers par √©mission de titres (actions, obligations) sans interm√©diaire bancaire." },
                { term: "Financement Indirect", definition: "Financement via un interm√©diaire bancaire qui collecte l'√©pargne et la transforme en cr√©dits." },
                { term: "March√© Primaire", definition: "March√© des titres neufs, servant au financement de l'√©conomie." },
                { term: "March√© Secondaire", definition: "March√© des titres d'occasion (la Bourse), assurant la liquidit√© et la d√©couverte des prix." },
                { term: "Monopole", definition: "Structure de march√© avec un seul vendeur ('price maker')." },
                { term: "Oligopole", definition: "Structure de march√© avec un petit nombre de vendeurs dominants, caract√©ris√©e par l'interd√©pendance strat√©gique." },
                { term: "S√©lection Adverse", definition: "D√©faillance de march√© (ex-ante) o√π les mauvais produits chassent les bons √† cause d'une information cach√©e sur la qualit√©." }
            ];

            const faqData = [
                 { question: "Quelle est la diff√©rence entre un flux r√©el et un flux mon√©taire ?", answer: "Un flux r√©el est le mouvement d'un bien ou service (ex: une baguette de pain). Un flux mon√©taire est sa contrepartie en argent (ex: la pi√®ce de 1‚Ç¨). √Ä tout flux r√©el correspond un flux mon√©taire de sens oppos√©." },
                 { question: "Pourquoi la courbe de la demande est-elle d√©croissante ?", answer: "Car lorsque le prix d'un bien augmente, les consommateurs en ach√®tent moins. Cela est d√ª √† l'effet de substitution (on ach√®te un produit similaire moins cher) et √† l'effet de revenu (notre pouvoir d'achat diminue)." },
                 { question: "Qu'est-ce qui distingue un monopole d'un oligopole ?", answer: "Le monopole, c'est un seul vendeur sur le march√© (ex: distribution d'eau). L'oligopole, c'est un petit nombre de vendeurs (ex: op√©rateurs t√©l√©phoniques). La grande diff√©rence est l'interd√©pendance strat√©gique dans l'oligopole : chaque d√©cision doit anticiper la r√©action des concurrents." },
                 { question: "S√©lection adverse vs. Al√©a moral : comment ne pas les confondre ?", answer: "Pensez au timing ! La s√©lection adverse, c'est AVANT le contrat (on a peur de choisir un 'mauvais' produit). L'al√©a moral, c'est APR√àS le contrat (on change de comportement car on se sent prot√©g√©)." },
                 { question: "Comment les banques cr√©ent-elles de l'argent ?", answer: "Par le m√©canisme 'les cr√©dits font les d√©p√¥ts'. En accordant un pr√™t, une banque ne puise pas dans un coffre, elle inscrit la somme sur le compte de l'emprunteur par une simple √©criture comptable, cr√©ant ainsi de la nouvelle monnaie qui n'existait pas avant." }
            ];

            const glossaryList = document.getElementById('glossary-list');
            const glossarySearch = document.getElementById('glossary-search');
            
            function renderGlossary(filter = '') {
                if(!glossaryList) return;
                glossaryList.innerHTML = '';
                const filteredData = glossaryData.filter(item => item.term.toLowerCase().includes(filter.toLowerCase()));
                filteredData.forEach(item => {
                    const div = document.createElement('div');
                    div.innerHTML = `<p class="font-bold text-gray-800">${item.term}</p><p class="text-sm text-gray-600">${item.definition}</p>`;
                    glossaryList.appendChild(div);
                });
            }

            if(glossarySearch) glossarySearch.addEventListener('input', (e) => renderGlossary(e.target.value));

            const faqContainer = document.getElementById('faq-container');
            function renderFaq() {
                if(!faqContainer) return;
                faqData.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'border-b border-gray-200 py-4';
                    div.innerHTML = `
                        <div class="faq-question flex justify-between items-center">
                            <h5 class="font-semibold text-gray-800">${item.question}</h5>
                            <span class="arrow text-blue-600 font-bold text-xl transform transition-transform duration-300">&#x276F;</span>
                        </div>
                        <div class="faq-answer mt-2 p-4 text-sm text-gray-700">
                            ${item.answer}
                        </div>
                    `;
                    faqContainer.appendChild(div);
                });

                faqContainer.addEventListener('click', (e) => {
                    const questionHeader = e.target.closest('.faq-question');
                    if (questionHeader) {
                        const answer = questionHeader.nextElementSibling;
                        const wasOpen = questionHeader.classList.contains('open');
                        document.querySelectorAll('.faq-question').forEach(q => q.classList.remove('open'));
                        document.querySelectorAll('.faq-answer').forEach(a => a.style.display = 'none');
                        if(!wasOpen) {
                            questionHeader.classList.add('open');
                            answer.style.display = 'block';
                        }
                    }
                });
            }

            const marketTabs = document.querySelectorAll('.tab-btn');
            const marketTabContents = document.querySelectorAll('.tab-content');
            marketTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    marketTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    marketTabContents.forEach(content => {
                        content.id === tab.dataset.tab ? content.classList.add('active') : content.classList.remove('active');
                    });
                });
            });

            const spectrumPoints = document.querySelectorAll('.spectrum-point');
            const structureInfo = document.getElementById('structure-info');
            const structureData = {
                cpp: {
                    title: "Concurrence Pure et Parfaite (CPP)",
                    description: "Un mod√®le th√©orique de r√©f√©rence o√π la concurrence est maximale. Aucune entreprise ne peut influencer le prix du march√©.",
                    features: ["Grand nombre de vendeurs et d'acheteurs", "Produits identiques (homog√®nes)", "Entr√©e et sortie libres du march√©", "Information parfaite"],
                    power: "Nul. L'entreprise est 'Price Taker' (preneuse de prix).",
                    example: "March√©s agricoles (bl√©, ma√Øs), march√©s financiers.",
                    strategy: "Minimiser les co√ªts de production pour maximiser le profit."
                },
                monopolistique: {
                    title: "Concurrence Monopolistique",
                    description: "La structure la plus courante pour les commerces de proximit√©. De nombreuses entreprises se font concurrence avec des produits diff√©renci√©s.",
                    features: ["Grand nombre de vendeurs", "Produits diff√©renci√©s (par la marque, qualit√©, service...)", "Entr√©e relativement facile"],
                    power: "Limit√©. L'entreprise peut fixer son prix, mais il reste contraint par la concurrence.",
                    example: "Restaurants, coiffeurs, magasins de v√™tements.",
                    strategy: "Diff√©renciation, marketing, fid√©lisation client pour cr√©er une 'niche'."
                },
                oligopole: {
                    title: "Oligopole",
                    description: "Un march√© domin√© par un petit nombre de grandes entreprises. Chaque d√©cision doit anticiper la r√©action des concurrents.",
                    features: ["Quelques vendeurs dominants", "Produits similaires ou diff√©renci√©s", "Barri√®res √† l'entr√©e importantes"],
                    power: "√âlev√©. Les entreprises sont 'Price Makers', mais interd√©pendantes.",
                    example: "Op√©rateurs t√©l√©phoniques, constructeurs automobiles, grande distribution.",
                    strategy: "Surveillance mutuelle, guerres des prix ou ententes (cartels, ill√©gaux)."
                },
                monopole: {
                    title: "Monopole",
                    description: "La situation la plus extr√™me o√π un seul vendeur contr√¥le la totalit√© du march√©, souvent en raison de barri√®res infranchissables.",
                    features: ["Un seul vendeur", "Aucun produit de substitution proche", "Barri√®res √† l'entr√©e totales"],
                    power: "Maximum. L'entreprise est 'Price Maker', seule la demande des consommateurs limite son prix.",
                    example: "SNCF (historiquement sur le r√©seau), distribution locale d'eau.",
                    strategy: "Maximisation du profit en jouant sur les quantit√©s produites et le prix."
                }
            };

            function updateStructureInfo(structureId) {
                const data = structureData[structureId];
                structureInfo.innerHTML = `
                    <h5 class="text-xl font-bold mb-2 text-blue-800">${data.title}</h5>
                    <p class="text-sm text-gray-600 mb-4">${data.description}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <p class="font-semibold">Caract√©ristiques :</p>
                            <ul class="list-disc list-inside text-gray-700">${data.features.map(f => `<li>${f}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <p><strong class="font-semibold">Pouvoir de March√© :</strong> ${data.power}</p>
                            <p class="mt-2"><strong class="font-semibold">Exemples :</strong> ${data.example}</p>
                            <p class="mt-2"><strong class="font-semibold">Strat√©gie Cl√© :</strong> ${data.strategy}</p>
                        </div>
                    </div>
                `;
            }

            if(spectrumPoints.length > 0){
                spectrumPoints.forEach(point => {
                    point.addEventListener('click', () => {
                        spectrumPoints.forEach(p => p.classList.remove('active'));
                        point.classList.add('active');
                        updateStructureInfo(point.dataset.structure);
                    });
                });
                updateStructureInfo('cpp');
            }
            
            // LOGIQUE DU QUIZ
            const quizData = [
                {
                    question: "Le principal r√¥le des m√©nages dans le circuit √©conomique est la production de biens marchands.",
                    type: "VRAI/FAUX",
                    difficulty: "Facile",
                    hint: "Chaque agent √©conomique a un r√¥le principal. Quel est celui qui consomme et celui qui produit pour vendre ?",
                    options: ["Vrai", "Faux"],
                    correct: [1],
                    feedback: {
                        correct: "Exact ! Le r√¥le principal des m√©nages est la consommation de biens et services et l'offre de leur travail.",
                        incorrect: "Incorrect. La production de biens marchands est la fonction principale des entreprises. Les m√©nages, eux, consomment."
                    }
                },
                {
                    question: "Quel agent √©conomique a pour fonction principale la production de services non marchands (comme l'√©ducation ou la s√©curit√©) ?",
                    type: "QCU",
                    difficulty: "Facile",
                    hint: "Pensez aux services que vous utilisez sans les payer directement sur un march√©, comme l'√©cole publique.",
                    options: ["Les entreprises", "L'√âtat", "Les banques", "Le reste du monde"],
                    correct: [1],
                    feedback: {
                        correct: "Parfait ! L'√âtat utilise les imp√¥ts pour financer des services publics qui ne sont pas vendus sur un march√©.",
                        incorrect: "Ce n'est pas la bonne r√©ponse. C'est bien l'√âtat qui fournit ces services essentiels non marchands."
                    }
                },
                {
                    question: "Sur un march√© en concurrence pure et parfaite (CPP), une entreprise est consid√©r√©e comme...",
                    type: "QCU",
                    difficulty: "Moyen",
                    hint: "Quand la concurrence est maximale, une seule entreprise peut-elle d√©cider du prix de vente ?",
                    options: ["Price Maker (fixeuse de prix)", "Price Taker (preneuse de prix)", "Leader du march√©", "Monopoleur"],
                    correct: [1],
                    feedback: {
                        correct: "Excellent ! En CPP, la concurrence est si intense qu'aucune entreprise seule ne peut influencer le prix du march√©.",
                        incorrect: "Incorrect. Une entreprise en CPP est 'Price Taker'. Le terme 'Price Maker' s'applique aux monopoles ou oligopoles."
                    }
                },
                {
                    question: "Quelles sont les caract√©ristiques principales de l'oligopole ? (Plusieurs r√©ponses possibles)",
                    type: "QCM",
                    difficulty: "Moyen",
                    hint: "Pensez au march√© des op√©rateurs mobiles en France. Combien sont-ils et comment se comportent-ils ?",
                    options: ["Un grand nombre de vendeurs", "Quelques vendeurs dominants", "Des produits toujours identiques", "Une forte interd√©pendance strat√©gique entre les concurrents"],
                    correct: [1, 3],
                    feedback: {
                        correct: "Tr√®s bien ! L'oligopole se d√©finit par un petit nombre d'acteurs qui doivent constamment surveiller et anticiper les actions de leurs rivaux.",
                        incorrect: "R√©ponse incompl√®te ou incorrecte. Les deux traits majeurs de l'oligopole sont le petit nombre de vendeurs et l'interd√©pendance de leurs strat√©gies."
                    }
                },
                {
                    question: "Une externalit√© positive, comme l'innovation, conduit √† une surproduction de ce bien par le march√©.",
                    type: "VRAI/FAUX",
                    difficulty: "Moyen",
                    hint: "Si une action b√©n√©ficie √† tous sans que le producteur soit pay√© pour, le march√© va-t-il en produire 'trop' ou 'pas assez' ?",
                    options: ["Vrai", "Faux"],
                    correct: [1],
                    feedback: {
                        correct: "C'est juste ! Le march√© tend √† sous-produire les biens √† externalit√©s positives car le producteur n'est pas r√©compens√© pour tous les b√©n√©fices qu'il g√©n√®re pour la soci√©t√©.",
                        incorrect: "Attention, c'est l'inverse. Le march√© conduit √† une SOUS-PRODUCTION des biens √† externalit√©s positives. Une externalit√© n√©gative (pollution) conduit √† une surproduction."
                    }
                },
                {
                    question: "En tant que manager d'un restaurant, vous d√©cidez de refaire votre d√©coration et de cr√©er une carte avec des plats uniques. √Ä quelle structure de march√© votre strat√©gie de diff√©renciation correspond-elle le mieux ?",
                    type: "QCU",
                    difficulty: "Difficile",
                    hint: "Dans quel type de march√© trouve-t-on de nombreux vendeurs avec des produits similaires mais pas identiques (marques, qualit√©, etc.) ?",
                    options: ["Monopole", "Concurrence Pure et Parfaite", "Concurrence Monopolistique", "Oligopole"],
                    correct: [2],
                    feedback: {
                        correct: "Exactement ! Vous √™tes sur un march√© avec de nombreux concurrents (les autres restaurants), mais vous cherchez √† vous diff√©rencier pour fid√©liser une client√®le et avoir un certain pouvoir sur vos prix.",
                        incorrect: "La bonne r√©ponse est 'Concurrence Monopolistique'. C'est le mod√®le qui d√©crit un grand nombre d'acteurs vendant des produits similaires mais non identiques."
                    }
                },
                {
                    question: "Le financement direct se fait principalement via les cr√©dits bancaires.",
                    type: "VRAI/FAUX",
                    difficulty: "Facile",
                    hint: "Le mot 'direct' implique-t-il l'absence d'interm√©diaire comme une banque ?",
                    options: ["Vrai", "Faux"],
                    correct: [1],
                    feedback: {
                        correct: "C'est bien √ßa ! Le financement direct se fait sur les march√©s financiers (actions, obligations). Les cr√©dits bancaires rel√®vent du financement indirect (interm√©di√©).",
                        incorrect: "Incorrect. Les cr√©dits bancaires sont la principale forme de financement INDIRECT. Le financement direct se fait sur les march√©s financiers."
                    }
                },
                {
                    question: "L'al√©a moral est un probl√®me d'asym√©trie d'information qui se produit...",
                    type: "QCU",
                    difficulty: "Moyen",
                    hint: "Ce probl√®me appara√Æt-il √† cause d'une information cach√©e sur le produit AVANT l'achat, ou √† cause d'une action cach√©e APR√àS ?",
                    options: ["Avant la signature d'un contrat", "Pendant la n√©gociation", "Apr√®s la signature d'un contrat", "Uniquement sur les march√©s financiers"],
                    correct: [2],
                    feedback: {
                        correct: "Parfait ! L'al√©a moral d√©crit un changement de comportement (prise de risque) une fois qu'on se sent prot√©g√© par le contrat (ex: assurance).",
                        incorrect: "Ce n'est pas tout √† fait √ßa. Le probl√®me qui survient AVANT le contrat est la s√©lection adverse. L'al√©a moral survient APRES."
                    }
                },
                 {
                    question: "Quels √©l√©ments suivants sont des exemples de barri√®res √† l'entr√©e r√©glementaires ? (Plusieurs r√©ponses possibles)",
                    type: "QCM",
                    difficulty: "Difficile",
                    hint: "Le mot 'r√©glementaire' fait r√©f√©rence √† ce qui est impos√© par la loi ou les r√®glements de l'√âtat.",
                    options: ["Une image de marque tr√®s forte", "Un brevet prot√©geant une invention", "Des co√ªts de publicit√© √©lev√©s", "Une licence obligatoire pour exercer une activit√© (ex: pharmacie)"],
                    correct: [1, 3],
                    feedback: {
                        correct: "Excellent ! Les barri√®res r√©glementaires sont celles impos√©es par la loi, comme les brevets ou les licences.",
                        incorrect: "Attention √† la distinction. Une image de marque forte ou des co√ªts publicitaires √©lev√©s sont des barri√®res strat√©giques, cr√©√©es par les entreprises elles-m√™mes. Les brevets et licences sont des barri√®res r√©glementaires, impos√©es par l'√âtat."
                    }
                },
                {
                    question: "Une politique mon√©taire restrictive de la Banque Centrale Europ√©enne (BCE) consiste √† baisser les taux d'int√©r√™t.",
                    type: "VRAI/FAUX",
                    difficulty: "Moyen",
                    hint: "'Restrictive' signifie que l'on veut freiner l'√©conomie pour lutter contre l'inflation. Faut-il rendre le cr√©dit plus cher ou moins cher ?",
                    options: ["Vrai", "Faux"],
                    correct: [1],
                    feedback: {
                        correct: "Exact ! Une politique restrictive vise √† lutter contre l'inflation en augmentant les taux d'int√©r√™t pour freiner le cr√©dit.",
                        incorrect: "C'est l'inverse. Une politique restrictive consiste √† AUGMENTER les taux d'int√©r√™t. Baisser les taux correspond √† une politique expansionniste."
                    }
                },
                 {
                    question: "Un cartel est une forme...",
                    type: "QCU",
                    difficulty: "Moyen",
                    hint: "Pensez √† une entente secr√®te sur les prix. Est-ce que cela favorise la concurrence et les consommateurs ?",
                    options: ["L√©gale et encourag√©e de coop√©ration", "Ill√©gale de coop√©ration entre concurrents", "De monopole naturel", "De concurrence pure et parfaite"],
                    correct: [1],
                    feedback: {
                        correct: "Tr√®s bien ! Les cartels (ententes sur les prix) sont s√©v√®rement punis car ils nuisent aux consommateurs.",
                        incorrect: "Incorrect. Un cartel est une entente ill√©gale entre concurrents pour agir comme un monopole."
                    }
                },
                {
                    question: "Le salaire vers√© par une entreprise √† un employ√© est un...",
                    type: "QCU",
                    difficulty: "Facile",
                    hint: "Le travail est l'√©change physique (r√©el). Quelle est sa contrepartie ?",
                    options: ["Flux r√©el", "Flux mon√©taire", "Service non marchan", "Investissement en capital"],
                    correct: [1],
                    feedback: {
                        correct: "Parfait ! C'est la contrepartie mon√©taire du flux r√©el qu'est le travail fourni par l'employ√©.",
                        incorrect: "Le salaire est bien un flux mon√©taire. Le travail fourni par l'employ√© est le flux r√©el correspondant."
                    }
                },
                 {
                    question: "Le march√© secondaire (la Bourse) sert principalement √† financer les nouvelles √©missions d'actions des entreprises.",
                    type: "VRAI/FAUX",
                    difficulty: "Moyen",
                    hint: "Le march√© 'secondaire' est comme le march√© de l'occasion. L'argent change-t-il de mains entre acheteurs/vendeurs ou va-t-il √† l'entreprise qui a cr√©√© le produit ?",
                    options: ["Vrai", "Faux"],
                    correct: [1],
                    feedback: {
                        correct: "Exactement ! Le march√© secondaire assure la liquidit√© (revente des titres) mais ne finance pas directement l'entreprise. C'est le r√¥le du march√© primaire.",
                        incorrect: "Attention. Le financement des entreprises via de nouvelles actions se fait sur le march√© PRIMAIRE. Le march√© secondaire est celui de l'occasion."
                    }
                },
                 {
                    question: "Une politique budg√©taire de relance peut inclure... (Plusieurs r√©ponses possibles)",
                    type: "QCM",
                    difficulty: "Difficile",
                    hint: "Pour 'relancer' l'√©conomie, l'√âtat doit-il injecter de l'argent ou en retirer ?",
                    options: ["Une augmentation des imp√¥ts", "Une augmentation des d√©penses publiques (ex: grands travaux)", "Une baisse des imp√¥ts sur le revenu", "Une hausse des taux d'int√©r√™t"],
                    correct: [1, 2],
                    feedback: {
                        correct: "Parfait ! Une politique de relance vise √† injecter de l'argent dans l'√©conomie, soit en d√©pensant plus (√âtat), soit en laissant plus de revenus aux agents (baisse d'imp√¥ts).",
                        incorrect: "Attention √† ne pas confondre les politiques. La hausse des taux d'int√©r√™t rel√®ve de la politique mon√©taire, et la hausse des imp√¥ts d'une politique de rigueur budg√©taire."
                    }
                },
                {
                    question: "Le probl√®me des voitures d'occasion de mauvaise qualit√© qui finissent par dominer le march√© est un exemple typique de...",
                    type: "QCU",
                    difficulty: "Difficile",
                    hint: "Le probl√®me vient du fait que le vendeur conna√Æt la qualit√© (information cach√©e) et l'acheteur non, AVANT la vente.",
                    options: ["Externalit√© n√©gative", "S√©lection adverse", "Al√©a moral", "Oligopole"],
                    correct: [1],
                    feedback: {
                        correct: "Excellent ! C'est la d√©finition m√™me de la s√©lection adverse : l'asym√©trie d'information avant l'achat conduit les bons produits √† se retirer du march√©.",
                        incorrect: "La bonne r√©ponse est 'S√©lection adverse'. L'al√©a moral concerne un changement de comportement APRES la transaction."
                    }
                }
            ];

            const quizStartScreen = document.getElementById('quiz-start-screen');
            const quizMainScreen = document.getElementById('quiz-main-screen');
            const quizResultsScreen = document.getElementById('quiz-results-screen');
            const startQuizBtn = document.getElementById('start-quiz-btn');
            
            const progressText = document.getElementById('quiz-progress-text');
            const progressBar = document.getElementById('quiz-progress-bar');
            
            const questionText = document.getElementById('question-text');
            const questionDifficulty = document.getElementById('question-difficulty');
            const showHintBtn = document.getElementById('show-hint-btn');
            const hintContainer = document.getElementById('hint-container');
            const answerOptionsContainer = document.getElementById('answer-options');
            const feedbackContainer = document.getElementById('feedback-container');
            
            const checkAnswerBtn = document.getElementById('check-answer-btn');
            const nextQuestionBtn = document.getElementById('next-question-btn');
            const restartQuizBtn = document.getElementById('restart-quiz-btn');
            const backToTopBtn = document.getElementById('back-to-top');

            window.onscroll = function() {
                if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                    backToTopBtn.classList.remove('hidden');
                } else {
                    backToTopBtn.classList.add('hidden');
                }
            };
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });


            let currentQuestionIndex = 0;
            let score = 0;
            let questions = [];

            startQuizBtn.addEventListener('click', startQuiz);
            nextQuestionBtn.addEventListener('click', () => {
                currentQuestionIndex++;
                if(currentQuestionIndex < questions.length) {
                    loadQuestion();
                } else {
                    showResults();
                }
            });
            checkAnswerBtn.addEventListener('click', checkAnswer);
            restartQuizBtn.addEventListener('click', () => {
                 quizResultsScreen.classList.add('hidden');
                 quizStartScreen.classList.remove('hidden');
            });
            showHintBtn.addEventListener('click', () => {
                hintContainer.classList.remove('hidden');
                showHintBtn.classList.add('hidden');
            });

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function startQuiz() {
                quizStartScreen.classList.add('hidden');
                quizMainScreen.classList.remove('hidden');
                quizResultsScreen.classList.add('hidden');
                
                score = 0;
                currentQuestionIndex = 0;
                questions = [...quizData];
                shuffleArray(questions);
                
                loadQuestion();
            }

            function loadQuestion() {
                feedbackContainer.classList.add('hidden');
                hintContainer.classList.add('hidden');
                showHintBtn.classList.remove('hidden');
                checkAnswerBtn.classList.remove('hidden');
                nextQuestionBtn.classList.add('hidden');
                
                const question = questions[currentQuestionIndex];
                
                progressText.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
                progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
                
                questionText.textContent = question.question;
                questionDifficulty.textContent = question.difficulty;
                if (question.difficulty === 'Facile') questionDifficulty.className = 'text-xs font-medium px-2.5 py-0.5 rounded-full bg-green-100 text-green-800 flex-shrink-0';
                else if (question.difficulty === 'Moyen') questionDifficulty.className = 'text-xs font-medium px-2.5 py-0.5 rounded-full bg-yellow-100 text-yellow-800 flex-shrink-0';
                else questionDifficulty.className = 'text-xs font-medium px-2.5 py-0.5 rounded-full bg-red-100 text-red-800 flex-shrink-0';

                hintContainer.textContent = question.hint;

                answerOptionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('label');
                    optionElement.className = 'quiz-option';
                    
                    const inputType = question.type === 'QCM' ? 'checkbox' : 'radio';
                    optionElement.innerHTML = `
                        <input type="${inputType}" name="answer" value="${index}" class="mr-2 pointer-events-none">
                        <span>${option}</span>
                    `;
                    answerOptionsContainer.appendChild(optionElement);
                    optionElement.addEventListener('click', (e) => {
                        if (checkAnswerBtn.classList.contains('hidden')) return; // Block click after check
                        
                        const input = optionElement.querySelector('input');
                        if (inputType === 'radio') {
                             document.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
                             document.querySelectorAll('.quiz-option input').forEach(inp => inp.checked = false);
                             optionElement.classList.add('selected');
                             input.checked = true;
                        } else {
                            optionElement.classList.toggle('selected');
                            input.checked = !input.checked;
                        }
                    });
                });
            }
            
            function checkAnswer() {
                 const question = questions[currentQuestionIndex];
                 const selectedOptions = Array.from(answerOptionsContainer.querySelectorAll('input:checked')).map(input => parseInt(input.value));
                 
                 if(selectedOptions.length === 0) return; // Prevent checking if no answer is selected

                 let isCorrect = false;
                 if(question.type === 'QCM') {
                     isCorrect = selectedOptions.length === question.correct.length && selectedOptions.every(val => question.correct.includes(val));
                 } else {
                     isCorrect = selectedOptions.length === 1 && selectedOptions[0] === question.correct[0];
                 }
                 
                 if(isCorrect) {
                     score++;
                     feedbackContainer.innerHTML = `<p class="font-bold text-green-700">Bonne r√©ponse !</p><p>${question.feedback.correct}</p>`;
                     feedbackContainer.className = 'mt-4 p-4 rounded-md text-sm bg-green-50 border border-green-200';
                 } else {
                     feedbackContainer.innerHTML = `<p class="font-bold text-red-700">R√©ponse incorrecte.</p><p>${question.feedback.incorrect}</p>`;
                     feedbackContainer.className = 'mt-4 p-4 rounded-md text-sm bg-red-50 border border-red-200';
                 }
                 
                 Array.from(answerOptionsContainer.children).forEach((label, index) => {
                     const input = label.querySelector('input');
                     if(question.correct.includes(index)){
                         label.classList.add('correct');
                     } else if (selectedOptions.includes(index)) {
                         label.classList.add('incorrect');
                     }
                 });
                 
                 feedbackContainer.classList.remove('hidden');
                 checkAnswerBtn.classList.add('hidden');
                 showHintBtn.classList.add('hidden');
                 nextQuestionBtn.classList.remove('hidden');
                 if(currentQuestionIndex === questions.length - 1) {
                     nextQuestionBtn.textContent = "Voir les r√©sultats";
                 }
            }

            function showResults() {
                quizMainScreen.classList.add('hidden');
                quizResultsScreen.classList.remove('hidden');
                
                const finalScore = document.getElementById('final-score');
                const finalScoreBar = document.getElementById('final-score-bar');
                const resultsFeedback = document.getElementById('results-feedback');

                finalScore.textContent = `${score} / ${questions.length}`;
                const percentage = (score / questions.length) * 100;
                finalScoreBar.style.width = `${percentage}%`;

                if(percentage >= 75) {
                    finalScoreBar.className = 'h-4 rounded-full bg-green-500';
                    resultsFeedback.innerHTML = `<strong class="text-green-700">F√©licitations !</strong> Vous avez une excellente compr√©hension des concepts √©conomiques cl√©s. Continuez sur cette lanc√©e !`;
                } else {
                    finalScoreBar.className = 'h-4 rounded-full bg-red-500';
                    resultsFeedback.innerHTML = `<strong class="text-red-700">Continuez vos efforts !</strong> Vous avez bien progress√©, mais certains points m√©ritent d'√™tre revus. N'h√©sitez pas √† parcourir de nouveau le manuel et √† retenter le quiz pour consolider vos acquis.`;
                }
            }

            // Initialisation de toutes les fonctions
            showSection('introduction');
            createSupplyDemandChart();
            createExternalitiesChart();
            renderGlossary();
            renderFaq();
        });
    </script>
</body>
</html>

