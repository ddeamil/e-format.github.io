<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion de Tr√©sorerie : Le Manuel Interactif - BTS MCO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: Final build including a main thematic title and a footer. These elements frame the content, providing a clear identity and a professional finish to the complete, multi-chapter, interactive learning application. -->
    <!-- Visualization & Content Choices: 
    - Report Info: Main Application Title. Goal: Establish context and identity. Method: Added a prominent H1/H2 block at the top of the main content area. Justification: Gives the application a clear, professional title beyond its format.
    - Report Info: Footer Information. Goal: Conclude the user experience professionally. Method: Added a standard footer with copyright and a mission statement. Justification: Essential final element for any complete web application.
    - Report Info: All other content is retained.
    - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #FDFBF8; color: #4A4A4A; }
        h1, h2, h3, .font-lora { font-family: 'Lora', serif; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin: auto; height: 300px; max-height: 40vh; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .sticky-nav { position: sticky; top: 0; z-index: 50; }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.07); border: 1px solid #F3EDE7; }
        .point-cle { background-color: #FBF7F2; border-left: 4px solid #C89F9C; padding: 1rem; border-radius: 0.5rem; }
        .btn-primary { background-color: #C89F9C; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; text-align: center; transition: background-color 0.3s; }
        .btn-primary:hover { background-color: #B58A86; }
        .tab-btn { padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 500; transition: all 0.2s; border: 1px solid transparent; }
        .tab-btn.active { background-color: #C89F9C; color: white; border-color: #C89F9C; }
        .tab-btn:not(.active) { background-color: #FBF7F2; color: #8D6B6A; border-color: #F3EDE7; }
        .faq-question { cursor: pointer; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-in-out; }
        .faq-item.active .faq-answer { max-height: 500px; }
        .faq-icon { transition: transform 0.3s; }
        .faq-item.active .faq-icon { transform: rotate(45deg); }
        .quiz-option { cursor: pointer; border: 2px solid #F3EDE7; transition: all 0.2s; }
        .quiz-option:hover { border-color: #C89F9C; background-color: #FBF7F2; }
        .quiz-option.selected { border-color: #8D6B6A; }
        .quiz-option.correct { background-color: #D1FAE5; border-color: #10B981; }
        .quiz-option.incorrect { background-color: #FEE2E2; border-color: #EF4444; }
    </style>
</head>
<body class="antialiased">

    <header class="sticky-nav bg-white/90 backdrop-blur-lg shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0"><h1 class="text-xl font-bold text-[#8D6B6A] font-lora">Ma√Ætriser la Tr√©sorerie</h1></div>
                <div class="hidden md:block">
                    <div id="nav-links-desktop" class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#introduction" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Intro</a>
                        <a href="#fondamentaux" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Fondamentaux</a>
                        <a href="#pilotage" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Pilotage</a>
                        <a href="#optimisation" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Optimisation</a>
                        <a href="#juridique" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Juridique</a>
                        <a href="#simulation" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Cas Pratique</a>
                        <a href="#ressources" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Ressources</a>
                        <a href="#synthese" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">Synth√®se</a>
                        <a href="#evaluation" class="text-gray-600 hover:text-[#8D6B6A] px-2 py-2 rounded-md text-sm font-medium">√âvaluation</a>
                    </div>
                </div>
                 <div class="md:hidden">
                    <button id="burger-btn" class="inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-[#8D6B6A] focus:outline-none">
                        <svg id="burger-icon-open" class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        <svg id="burger-icon-close" class="h-6 w-6 hidden" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="nav-links-mobile" class="md:hidden hidden bg-white shadow-lg">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#introduction" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Introduction</a>
                <a href="#fondamentaux" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Fondamentaux</a>
                <a href="#pilotage" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Pilotage</a>
                <a href="#optimisation" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Optimisation</a>
                <a href="#juridique" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Cadre Juridique</a>
                <a href="#simulation" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Cas Pratique</a>
                <a href="#ressources" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Ressources</a>
                <a href="#synthese" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">Synth√®se</a>
                <a href="#evaluation" class="text-gray-600 hover:text-[#8D6B6A] block px-3 py-2 rounded-md text-base font-medium">√âvaluation</a>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">

        <div class="text-center pt-8 mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-[#8D6B6A] font-lora">Ma√Ætriser la Tr√©sorerie et le Financement du Cycle d'Exploitation</h1>
            <h2 class="mt-3 text-xl text-gray-600">Gestion Op√©rationnelle</h2>
        </div>

        <section id="introduction" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Introduction Vid√©o</h2>
            <p class="mb-8 text-lg text-gray-700">Pour bien commencer, cette vid√©o pr√©sente les concepts fondamentaux de la gestion de tr√©sorerie, leur importance pour le manager et leur application dans le cadre du BTS MCO.</p>
            <div class="card p-2 overflow-hidden"><div style="position: relative; width: 100%; height: 0; padding-top: 56.25%; border-radius: 0.5rem; overflow: hidden;"><iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none;" src="https://www.canva.com/design/DAGzo0XOSt8/SzKWXrB7jn4iyskaj-J48Q/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen"></iframe></div></div>
        </section>

        <section id="fondamentaux" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 1 : Les Fondamentaux</h2>
            <p class="mb-8 text-lg text-gray-700">Explorez la m√©canique financi√®re de l'entreprise et comment les op√©rations quotidiennes cr√©ent un besoin de financement qui impacte l'argent disponible.</p>
            <div class="card p-8"><h3 class="text-2xl font-semibold text-center mb-6 text-[#C89F9C]">La Cha√Æne de Causalit√© Financi√®re</h3><div class="flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0 md:space-x-6"><div class="text-center p-4 rounded-lg bg-slate-50 flex-1"><div class="text-lg font-semibold">1. Cycle d'Exploitation</div><p class="text-sm">Achat ‚Üí Stockage ‚Üí Vente</p></div><div class="text-5xl font-thin text-gray-400">‚Üí</div><div class="text-center p-4 rounded-lg bg-slate-50 flex-1"><div class="text-lg font-semibold">2. BFR</div><p class="text-sm">Besoin de Financement</p></div><div class="text-5xl font-thin text-gray-400">‚Üí</div><div class="text-center p-4 rounded-lg bg-slate-50 flex-1"><div class="text-lg font-semibold">3. Tr√©sorerie</div><p class="text-sm">Argent r√©ellement disponible</p></div></div><div class="mt-8 point-cle"><h4 class="font-bold mb-2">D√©finition Cl√© : Le Besoin en Fonds de Roulement (BFR)</h4><p>Le BFR repr√©sente le montant qu'une entreprise doit financer pour couvrir le d√©calage temporel entre ses d√©caissements et ses encaissements. Sa formule de base est :</p><p class="font-mono text-center bg-white/50 rounded p-2 mt-2 text-sm md:text-base">BFR = Stocks + Cr√©ances Clients - Dettes Fournisseurs</p></div><div class="mt-6 point-cle bg-red-50 border-red-400"><h4 class="font-bold mb-2 text-red-800">Le Paradoxe : Rentabilit√© vs. Tr√©sorerie</h4><p>Une entreprise peut √™tre rentable mais faire faillite si elle n'a pas assez de tr√©sorerie pour payer ses factures. La survie √† court terme d√©pend des liquidit√©s (un fait), pas de la rentabilit√© comptable (une opinion).</p></div></div>
        </section>

        <section id="pilotage" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 2 : Le Pilotage Quotidien</h2>
            <p class="mb-8 text-lg text-gray-700">Un bon pilotage combine contr√¥les op√©rationnels (caisse), outils d'analyse (cr√©ances) et processus clairs (relance).</p>
            <div class="grid lg:grid-cols-2 gap-8 mb-8"><div class="card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Outil : Le Suivi de Caisse</h3><p class="mb-4 text-sm">Le contr√¥le quotidien des esp√®ces est la premi√®re √©tape pour s√©curiser la tr√©sorerie. L'outil cl√© est le Ticket Z.</p><div class="point-cle text-sm"><h4 class="font-bold mb-2">R√¥le du "Ticket Z"</h4><p>Ce rapport r√©capitulatif des op√©rations de la journ√©e sert de pi√®ce justificative et permet de contr√¥ler la concordance entre le montant th√©orique des ventes et l'argent r√©ellement pr√©sent en caisse.</p></div></div><div class="card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Outil : Le Suivi des Cr√©ances</h3><p class="mb-4 text-sm">Deux outils sont compl√©mentaires : l'<strong>√©ch√©ancier</strong> pour la gestion quotidienne, et la <strong>balance √¢g√©e</strong> pour l'analyse du risque.</p><div class="point-cle text-sm"><h4 class="font-bold mb-2">La Balance √Çg√©e</h4><p>Elle classe les factures impay√©es par client et par anciennet√© de retard. Elle permet de visualiser rapidement o√π se situe le risque et de prioriser les actions.</p></div></div></div>
            <div class="card p-8 mb-8"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Mise en Pratique : La Cl√¥ture de Caisse</h3><div class="grid md:grid-cols-2 gap-8 items-center"><div><p class="text-sm mb-4">Votre Ticket Z indique un total d'encaissements en esp√®ces de <strong id="ticket-z-amount-text">1 254,50 ‚Ç¨</strong>. Comptez l'argent r√©ellement pr√©sent dans votre caisse.</p><label for="physical-cash-input" class="block text-sm font-medium text-gray-700">Montant compt√© physiquement (‚Ç¨)</label><input type="number" id="physical-cash-input" placeholder="Ex: 1254.50" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#C89F9C] focus:ring-[#C89F9C] sm:text-sm"><button id="check-cash-btn" class="btn-primary w-full mt-3">Contr√¥ler la caisse</button></div><div id="cash-result" class="p-4 rounded-lg text-center font-semibold"></div></div></div>
            <div class="grid lg:grid-cols-5 gap-8"><div class="lg:col-span-2 card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Processus : La Relance Amiable</h3><p class="mb-4 text-sm">Une proc√©dure gradu√©e est essentielle pour recouvrer les cr√©ances.</p><ol class="relative border-l border-gray-200"><li class="mb-8 ml-4"><div class="absolute w-4 h-4 bg-gray-300 rounded-full mt-1.5 -left-2 border-4 border-white"></div><h4 class="text-base font-semibold">1. Contact Informel</h4><p class="text-sm text-gray-500">Pr√©server la relation</p></li><li class="mb-8 ml-4"><div class="absolute w-4 h-4 bg-yellow-300 rounded-full mt-1.5 -left-2 border-4 border-white"></div><h4 class="text-base font-semibold">2. Relance Simple</h4><p class="text-sm text-gray-500">Rappeler l'obligation</p></li><li class="mb-8 ml-4"><div class="absolute w-4 h-4 bg-orange-400 rounded-full mt-1.5 -left-2 border-4 border-white"></div><h4 class="text-base font-semibold">3. Recommand√©e</h4><p class="text-sm text-gray-500">Fixer un ultimatum</p></li><li class="ml-4"><div class="absolute w-4 h-4 bg-red-500 rounded-full mt-1.5 -left-2 border-4 border-white"></div><h4 class="text-base font-semibold">4. Mise en Demeure</h4><p class="text-sm text-gray-500">Pr√©alable √† la justice</p></li></ol></div><div class="lg:col-span-3 card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Mise en Pratique : √âch√©ancier vs. Balance √Çg√©e</h3><p class="text-sm mb-4">Basculez entre les vues pour comprendre leur compl√©mentarit√©.</p><div class="flex space-x-2 mb-4"><button id="btn-echeancier" class="tab-btn active">Vue √âch√©ancier (Gestion)</button><button id="btn-balance" class="tab-btn">Vue Balance √Çg√©e (Risque)</button></div><div id="receivables-view-container" class="overflow-x-auto"></div></div></div>
        </section>
        
        <section id="optimisation" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 3 : Les Levier d'Optimisation</h2>
            <p class="mb-8 text-lg text-gray-700">Le manager dispose de leviers pour optimiser la tr√©sorerie, en acc√©l√©rant les encaissements ou en n√©gociant des financements pour couvrir le BFR.</p>
            <div class="grid lg:grid-cols-2 gap-8"><div class="card p-6"><h3 class="font-bold text-xl mb-2 text-[#C89F9C]">Levier 1 : L'Escompte de R√®glement</h3><p class="mb-4 text-sm">Proposer une r√©duction pour paiement anticip√©. L'arbitrage : le co√ªt de la r√©duction est-il inf√©rieur au co√ªt du financement externe √©vit√© ?</p><div class="point-cle mb-4 p-3 text-sm"><h4 class="font-semibold">Exemple :</h4><p>Facture 5000‚Ç¨, taux 2%. R√©duction : 100‚Ç¨.</p></div><div class="space-y-4"><div><label for="escompte-montant" class="block text-sm font-medium">Montant Facture (‚Ç¨)</label><input type="number" id="escompte-montant" value="5000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></div><div><label for="escompte-taux" class="block text-sm font-medium">Taux d'escompte (%)</label><input type="number" id="escompte-taux" value="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></div><div id="result-escompte" class="mt-2 pt-2 border-t text-center font-semibold text-lg"></div></div></div><div class="card p-6"><h3 class="font-bold text-xl mb-2 text-[#C89F9C]">Levier 2 : Le Financement Bancaire</h3><p class="mb-4 text-sm">Le co√ªt du cr√©dit (agios) = int√©r√™ts + commissions. Le choix de la solution impacte la pr√©sentation du bilan.</p><div class="point-cle mb-4 p-3 text-sm"><h4 class="font-semibold">D√©couvert vs. Escompte :</h4><p>D√©couvert ‚ÜóÔ∏é dettes (passif). Escompte ‚ÜòÔ∏é cr√©ances (actif).</p></div><div class="space-y-4"><div><label for="fin-montant" class="block text-sm font-medium">Montant √† financer (‚Ç¨)</label><input type="number" id="fin-montant" value="10000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></div><div><label for="fin-jours" class="block text-sm font-medium">Dur√©e (jours)</label><input type="number" id="fin-jours" value="30" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></div><div><label for="fin-taux" class="block text-sm font-medium">Taux annuel d'int√©r√™ts (%)</label><input type="number" id="fin-taux" value="8" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm"></div><div id="result-fin" class="mt-2 pt-2 border-t text-center font-semibold text-lg"></div></div></div></div>
        </section>

        <section id="juridique" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 4 : Le Cadre Juridique</h2>
            <p class="mb-8 text-lg text-gray-700">La n√©gociation des d√©lais de paiement est encadr√©e par la loi. La ma√Ætrise de ces r√®gles, d√©finies dans les CGV, est essentielle.</p>
            <div class="card p-8"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Synth√®se des D√©lais de Paiement L√©gaux</h3><div class="overflow-x-auto"><table class="min-w-full border"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Situation</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">D√©lai Maximum</th></tr></thead><tbody class="bg-white"><tr class="border-b"><td class="px-6 py-4 font-semibold">Par d√©faut (sans mention)</td><td class="px-6 py-4">30 jours nets apr√®s r√©ception/ex√©cution.</td></tr><tr class="border-b"><td class="px-6 py-4 font-semibold">N√©goci√© dans les CGV</td><td class="px-6 py-4">60 jours nets √† compter de la date de facturation.</td></tr><tr><td class="px-6 py-4 font-semibold">N√©goci√© (d√©rogatoire)</td><td class="px-6 py-4">45 jours fin de mois √† compter de la date de facturation.</td></tr></tbody></table></div><div class="mt-6 point-cle"><h4 class="font-bold mb-2">Attention au calcul "45 jours fin de mois" !</h4><p class="text-sm">Cette mention est ambigu√´ et peut correspondre √† deux m√©thodes. Il est crucial de pr√©ciser la m√©thode dans les CGV pour √©viter les litiges.</p></div></div>
        </section>

        <section id="simulation" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 5 : Cas Pratique Interactif</h2>
            <p class="mb-8 text-lg text-gray-700">Devenez le manager de "La Bo√Æte √† V√©los". Vos d√©cisions sur les d√©lais de paiement vont directement impacter la sant√© financi√®re de votre magasin.</p>
            <div class="card p-8"><div class="border-b-2 border-dashed border-gray-200 pb-6 mb-6"><h3 class="text-2xl font-semibold text-center mb-4 text-[#C89F9C]">Mise en situation : "La Bo√Æte √† V√©los"</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="bg-slate-50 p-4 rounded-lg text-center border"><div class="font-semibold text-gray-700">Chiffre d'Affaires Annuel</div><div class="text-xl font-bold text-slate-800">360 000 ‚Ç¨</div><div class="text-xs text-gray-500">(1 000 ‚Ç¨ / jour)</div></div><div class="bg-slate-50 p-4 rounded-lg text-center border"><div class="font-semibold text-gray-700">Dur√©e Moyenne de Stockage</div><div class="text-xl font-bold text-slate-800">30 Jours</div></div><div class="bg-slate-50 p-4 rounded-lg text-center border"><div class="font-semibold text-gray-700">Fonds de Roulement (FRNG)</div><div class="text-xl font-bold text-slate-800">20 000 ‚Ç¨</div></div></div></div><div class="grid md:grid-cols-2 gap-8 items-center"><div><div class="point-cle mb-6"><h4 class="font-bold">Votre Mission :</h4><p>Ajustez les d√©lais pour obtenir une <strong class="text-green-700">tr√©sorerie positive</strong>.</p></div><div class="space-y-4"><div><label for="delai-client-slider" class="block font-medium">D√©lai clients : <span id="delai-client-value" class="font-bold text-[#C89F9C]">45</span> j.</label><input type="range" id="delai-client-slider" min="15" max="90" value="45" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#C89F9C]"></div><div><label for="delai-fournisseur-slider" class="block font-medium">D√©lai fournisseurs : <span id="delai-fournisseur-value" class="font-bold text-[#C89F9C]">30</span> j.</label><input type="range" id="delai-fournisseur-slider" min="15" max="90" value="30" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#C89F9C]"></div></div></div><div class="bg-amber-50 p-4 rounded-lg space-y-2 text-sm font-mono text-gray-800 border"><h4 class="font-sans font-bold text-center mb-2">M√©canique de Calcul en Direct</h4><div id="bfr-jours-calcul"></div><div id="bfr-euros-calcul"></div><div class="border-t border-amber-300 pt-2 mt-2" id="treso-calcul"></div></div></div><div class="mt-8"><div id="impact-text" class="text-center text-lg mb-6 p-4 rounded-lg font-semibold"></div><div class="chart-container"><canvas id="impactChart"></canvas></div></div></div>
        </section>

        <section id="ressources" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 6 : Ressources P√©dagogiques</h2>
            <p class="mb-8 text-lg text-gray-700">Consolidez vos connaissances gr√¢ce √† ce lexique des termes cl√©s et cette foire aux questions qui adresse les points les plus importants.</p>
            <div class="grid lg:grid-cols-2 gap-8"><div class="card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Lexique</h3><dl class="space-y-4 text-sm"><div><dt class="font-semibold text-gray-800">Agios</dt><dd class="text-gray-600">Ensemble des frais pr√©lev√©s par la banque pour un d√©couvert (int√©r√™ts + commissions).</dd></div><div><dt class="font-semibold text-gray-800">Balance √Çg√©e</dt><dd class="text-gray-600">Document qui classe les cr√©ances clients par anciennet√© de retard.</dd></div><div><dt class="font-semibold text-gray-800">BFR (Besoin en Fonds de Roulement)</dt><dd class="text-gray-600">Montant n√©cessaire pour financer le d√©calage entre les d√©penses et les recettes du cycle d'exploitation.</dd></div><div><dt class="font-semibold text-gray-800">CGV (Conditions G√©n√©rales de Vente)</dt><dd class="text-gray-600">Document qui encadre les relations commerciales, notamment les d√©lais de paiement.</dd></div><div><dt class="font-semibold text-gray-800">Escompte</dt><dd class="text-gray-600">R√©duction financi√®re accord√©e √† un client en √©change d'un paiement anticip√©.</dd></div><div><dt class="font-semibold text-gray-800">FRNG (Fonds de Roulement Net Global)</dt><dd class="text-gray-600">Part des ressources stables de l'entreprise disponible pour financer l'exploitation.</dd></div><div><dt class="font-semibold text-gray-800">Ticket Z</dt><dd class="text-gray-600">Rapport de cl√¥ture de caisse qui r√©capitule toutes les transactions de la journ√©e.</dd></div><div><dt class="font-semibold text-gray-800">Tr√©sorerie</dt><dd class="text-gray-600">Ensemble des liquidit√©s imm√©diatement disponibles (caisse + banque).</dd></div></dl></div><div class="card p-6"><h3 class="font-bold text-xl mb-4 text-[#C89F9C]">Foire Aux Questions</h3><div id="faq-container" class="space-y-2"><div class="faq-item border-b pb-2"><div class="faq-question flex justify-between items-center py-2"><h4 class="font-semibold">Rentabilit√© et Tr√©sorerie : quelle diff√©rence ?</h4><div class="faq-icon text-2xl font-thin text-[#C89F9C]">+</div></div><div class="faq-answer text-sm text-gray-600 pr-4"><p class="pt-2">La <strong>rentabilit√©</strong> est une opinion comptable. La <strong>tr√©sorerie</strong> est un fait. Une entreprise peut √™tre rentable (vend beaucoup) mais faire faillite si ses clients ne paient pas (manque de tr√©sorerie).</p></div></div><div class="faq-item border-b pb-2"><div class="faq-question flex justify-between items-center py-2"><h4 class="font-semibold">Pourquoi dois-je financer le BFR ?</h4><div class="faq-icon text-2xl font-thin text-[#C89F9C]">+</div></div><div class="faq-answer text-sm text-gray-600 pr-4"><p class="pt-2">Car vous payez vos fournisseurs (d√©caissement) avant d'√™tre pay√© par vos clients (encaissement). Le BFR est le montant de cet "argent dehors". Il faut le financer en attendant que les clients paient.</p></div></div><div class="faq-item border-b pb-2"><div class="faq-question flex justify-between items-center py-2"><h4 class="font-semibold">Proposer un escompte, n'est-ce pas perdre de l'argent ?</h4><div class="faq-icon text-2xl font-thin text-[#C89F9C]">+</div></div><div class="faq-answer text-sm text-gray-600 pr-4"><p class="pt-2">Pas n√©cessairement. Si le co√ªt de l'escompte (ex: 100‚Ç¨) est inf√©rieur au co√ªt que vous auriez pay√© √† la banque (ex: 120‚Ç¨ d'agios), alors vous √™tes gagnant. Vous "payez" 100‚Ç¨ pour en √©conomiser 120.</p></div></div><div class="faq-item"><div class="faq-question flex justify-between items-center py-2"><h4 class="font-semibold">Pourquoi les d√©lais de paiement sont-ils si cruciaux ?</h4><div class="faq-icon text-2xl font-thin text-[#C89F9C]">+</div></div><div class="faq-answer text-sm text-gray-600 pr-4"><p class="pt-2">Car ils sont le principal levier d'action sur le BFR. Chaque jour de paiement gagn√© sur un client r√©duit le BFR. Chaque jour de paiement n√©goci√© avec un fournisseur r√©duit aussi le BFR. C'est le levier le plus direct sur la tr√©sorerie.</p></div></div></div></div></div>
        </section>

        <section id="synthese" class="mb-20 scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 7 : Synth√®se Visuelle</h2>
            <p class="mb-8 text-lg text-gray-700">Cette carte mentale interactive r√©sume les points essentiels de la gestion de tr√©sorerie. Naviguez √† travers les branches pour r√©viser les liens entre les concepts.</p>
            <div class="card p-2 md:p-4"><div class="w-full h-[750px] border border-gray-200 rounded-lg overflow-hidden"><iframe src='https://www.xmind.app/embed/b4h9sg/' style="width:100%; height:100%;" frameborder='0' scrolling='no' allowfullscreen="true"></iframe></div></div>
        </section>

        <section id="evaluation" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-[#8D6B6A] mb-4">Chapitre 8 : √âvaluation Formative</h2>
            <p class="mb-8 text-lg text-gray-700">Validez votre compr√©hension des concepts cl√©s avec ce quiz. L'objectif n'est pas de noter, mais de vous aider √† consolider vos acquis.</p>
            <div class="card p-8">
                <div id="quiz-container"><div id="quiz-header" class="flex justify-between items-center mb-6"><h3 class="text-xl font-bold text-[#C89F9C]">Quiz Interactif</h3><div id="quiz-progress" class="font-semibold text-gray-600"></div></div><div id="quiz-main" class="min-h-[300px]"><h4 id="quiz-question" class="text-lg font-semibold mb-6"></h4><div id="quiz-options" class="space-y-3"></div><div id="quiz-hint-container" class="mt-4 text-sm text-center"></div><div id="quiz-feedback" class="mt-6 p-4 rounded-lg text-sm"></div></div><div id="quiz-footer" class="mt-6 flex justify-between items-center"><button id="quiz-hint-btn" class="text-sm font-semibold text-[#8D6B6A] hover:underline">üí° Afficher l'indice</button><button id="quiz-next-btn" class="btn-primary">Question Suivante</button></div></div>
                <div id="quiz-result-container" class="text-center hidden"><h3 class="text-2xl font-bold text-[#8D6B6A] mb-4">R√©sultats du Quiz</h3><p id="quiz-score-text" class="text-4xl font-bold mb-2"></p><p id="quiz-score-message" class="text-lg text-gray-700 mb-6"></p><button id="quiz-restart-btn" class="btn-primary">Recommencer le Quiz</button></div>
            </div>
        </section>

    </main>

    <footer class="mt-20 py-8 bg-gray-100 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p class="text-sm font-semibold">¬© 2025 - 2026 | Outil P√©dagogique pour MCO</p>
            <p class="mt-1 text-xs">Con√ßu pour faciliter la compr√©hension des concepts cl√©s de la gestion de tr√©sorerie.</p>
        </div>
    </footer>

    <button id="scroll-to-top-btn" class="hidden fixed bottom-6 right-6 bg-[#C89F9C] text-white p-3 rounded-full shadow-lg hover:bg-[#B58A86] transition-opacity">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
    </button>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Responsive Navigation (Burger Menu) ---
        const burgerBtn = document.getElementById('burger-btn');
        const mobileMenu = document.getElementById('nav-links-mobile');
        const burgerIconOpen = document.getElementById('burger-icon-open');
        const burgerIconClose = document.getElementById('burger-icon-close');
        
        burgerBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            burgerIconOpen.classList.toggle('hidden');
            burgerIconClose.classList.toggle('hidden');
        });
        mobileMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                mobileMenu.classList.add('hidden');
                burgerIconOpen.classList.remove('hidden');
                burgerIconClose.classList.add('hidden');
            }
        });

        // --- Scroll-to-Top Button ---
        const scrollToTopBtn = document.getElementById('scroll-to-top-btn');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                scrollToTopBtn.classList.remove('hidden');
            } else {
                scrollToTopBtn.classList.add('hidden');
            }
        });
        scrollToTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });

        // --- Quiz Logic ---
        const quizData = [ { question: "Le BFR (Besoin en Fonds de Roulement) repr√©sente l'argent imm√©diatement disponible en banque.", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "Le BFR est un 'besoin'. Est-ce que cela correspond √† de l'argent disponible ?", feedback: { correct: "Exact. Le BFR est un besoin de financement li√© au cycle d'exploitation. L'argent disponible est la Tr√©sorerie.", incorrect: "Attention √† la confusion. Le BFR est un besoin de financement, pas une ressource. C'est la Tr√©sorerie qui repr√©sente l'argent disponible." } }, { question: "Si le d√©lai de paiement accord√© √† vos clients augmente, que se passe-t-il pour votre BFR ?", type: "mcq", options: ["Il diminue", "Il augmente", "Il reste stable"], answer: "Il augmente", hint: "Si les clients paient plus tard, l'argent reste 'dehors' plus longtemps. Cela augmente-t-il ou diminue-t-il votre besoin de financement ?", feedback: { correct: "Parfait. Un d√©lai client plus long augmente les cr√©ances, et donc augmente m√©caniquement le BFR.", incorrect: "C'est l'inverse. Si vos clients vous paient plus tard, votre besoin de financer cette attente augmente." } }, { question: "Un 'mali de caisse' signifie qu'il y a plus d'argent dans le tiroir-caisse que ce que le Ticket Z indique.", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "Le pr√©fixe 'mal' a une connotation n√©gative. Pensez √† 'malus'.", feedback: { correct: "C'est bien √ßa. Un 'mali' est un manque d'argent. Un surplus est un 'boni'.", incorrect: "Non, c'est le contraire. Un 'mali' (comme dans malus) est un manque. Un surplus d'argent est appel√© un 'boni'." } }, { question: "Quel outil permet une analyse du risque client en classant les retards de paiement par anciennet√© ?", type: "mcq", options: ["L'√©ch√©ancier des factures", "Le Ticket Z", "La balance √¢g√©e"], answer: "La balance √¢g√©e", hint: "Cet outil s'int√©resse √† 'l'√¢ge' des dettes.", feedback: { correct: "Tr√®s bien. La balance √¢g√©e est sp√©cifiquement con√ßue pour l'analyse du risque en segmentant les retards.", incorrect: "Pas exactement. L'√©ch√©ancier liste les factures √† venir, et le Ticket Z concerne la caisse. C'est bien la balance √¢g√©e qui analyse l'anciennet√© des retards." } }, { question: "Les agios factur√©s par une banque se composent uniquement des int√©r√™ts d√©biteurs.", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "La banque facture-t-elle parfois d'autres types de frais pour la gestion d'un compte ?", feedback: { correct: "Parfait. Les agios incluent les int√©r√™ts mais aussi diverses commissions (frais de dossier, etc.).", incorrect: "Attention, c'est incomplet. Les agios sont le co√ªt total, qui inclut les int√©r√™ts ET les commissions diverses." } }, { question: "Quelle solution de financement bancaire a pour effet de r√©duire le poste 'cr√©ances clients' √† l'actif du bilan ?", type: "mcq", options: ["Le d√©couvert autoris√©", "L'escompte d'effet de commerce", "Le cr√©dit de campagne"], answer: "L'escompte d'effet de commerce", hint: "L'une de ces m√©thodes consiste √† 'vendre' une cr√©ance √† la banque. Si vous la vendez, l'avez-vous encore ?", feedback: { correct: "Exact. En escomptant un effet, vous c√©dez la cr√©ance √† la banque, elle dispara√Æt donc de votre bilan, ce qui am√©liore sa pr√©sentation.", incorrect: "Non, le d√©couvert augmente les dettes au passif. C'est bien l'escompte qui retire la cr√©ance de l'actif." } }, { question: "Le d√©lai de paiement l√©gal par d√©faut entre professionnels, en l'absence de mention contraire, est de 60 jours.", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "La loi pr√©voit un d√©lai de base assez court pour prot√©ger les fournisseurs.", feedback: { correct: "C'est juste. Le d√©lai par d√©faut est de 30 jours. 60 jours est un plafond maximum n√©gociable.", incorrect: "Non, le d√©lai par d√©faut est de 30 jours. 60 jours est un des plafonds maximums qui doit √™tre explicitement n√©goci√©." } }, { question: "Dans le cas 'La Bo√Æte √† V√©los', si vous n√©gociez un d√©lai de paiement fournisseur de 60 jours au lieu de 30, votre tr√©sorerie...", type: "mcq", options: ["S'am√©liore", "Se d√©grade", "Reste identique"], answer: "S'am√©liore", hint: "Si vous payez vos fournisseurs plus tard, l'argent reste plus longtemps dans votre entreprise. Est-ce positif ou n√©gatif pour votre tr√©sorerie ?", feedback: { correct: "Excellent raisonnement. Payer les fournisseurs plus tard diminue le BFR et donc am√©liore directement la tr√©sorerie.", incorrect: "C'est l'inverse. Payer plus tard est une source de financement gratuite. Cela diminue votre BFR et am√©liore donc votre tr√©sorerie." } }, { question: "La formule 'Stocks + Cr√©ances Clients - Dettes Fournisseurs' permet de calculer le FRNG (Fonds de Roulement Net Global).", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "Cette formule calcule le besoin de financement li√© √† l'exploitation.", feedback: { correct: "Tr√®s bien. Cette formule est celle du BFR (Besoin en Fonds de Roulement).", incorrect: "Attention, c'est la formule du BFR. Le FRNG se calcule √† partir des √©l√©ments stables du bilan." } }, { question: "Un BFR n√©gatif est toujours un signe de mauvaise sant√© financi√®re.", type: "tf", options: ["Vrai", "Faux"], answer: "Faux", hint: "Pensez √† un supermarch√©. Il encaisse ses clients imm√©diatement (comptant) mais paie ses fournisseurs √† 30 ou 60 jours.", feedback: { correct: "Absolument. Un BFR n√©gatif (une ressource) est typique de la grande distribution et est un mod√®le de gestion tr√®s performant.", incorrect: "Au contraire ! Un BFR n√©gatif est souvent le signe d'un mod√®le √©conomique tr√®s performant (comme la grande distribution), o√π l'on encaisse les clients bien avant de payer les fournisseurs." } } ];
        const quizContainer = document.getElementById('quiz-container'); const quizResultContainer = document.getElementById('quiz-result-container'); const quizProgress = document.getElementById('quiz-progress'); const quizQuestion = document.getElementById('quiz-question'); const quizOptions = document.getElementById('quiz-options'); const quizHintContainer = document.getElementById('quiz-hint-container'); const quizFeedback = document.getElementById('quiz-feedback'); const quizHintBtn = document.getElementById('quiz-hint-btn'); const quizNextBtn = document.getElementById('quiz-next-btn'); const quizRestartBtn = document.getElementById('quiz-restart-btn');
        let currentQuestionIndex = 0; let score = 0; let answered = false;
        function startQuiz() { currentQuestionIndex = 0; score = 0; answered = false; quizContainer.style.display = 'block'; quizResultContainer.style.display = 'none'; loadQuestion(); }
        function loadQuestion() { answered = false; const currentQuestion = quizData[currentQuestionIndex]; quizProgress.textContent = `Question ${currentQuestionIndex + 1} / ${quizData.length}`; quizQuestion.textContent = currentQuestion.question; quizOptions.innerHTML = ''; currentQuestion.options.forEach(optionText => { const optionElement = document.createElement('div'); optionElement.textContent = optionText; optionElement.classList.add('quiz-option', 'p-4', 'rounded-lg'); optionElement.addEventListener('click', () => selectAnswer(optionElement, optionText)); quizOptions.appendChild(optionElement); }); quizHintContainer.innerHTML = ''; quizHintContainer.style.display = 'none'; quizFeedback.innerHTML = ''; quizFeedback.style.display = 'none'; quizHintBtn.style.display = 'block'; quizNextBtn.style.display = 'none'; }
        function selectAnswer(optionElement, selectedAnswer) { if (answered) return; answered = true; const currentQuestion = quizData[currentQuestionIndex]; const isCorrect = selectedAnswer === currentQuestion.answer; if (isCorrect) { score++; optionElement.classList.add('correct'); quizFeedback.innerHTML = `<strong class="text-green-700">Bonne r√©ponse !</strong> ${currentQuestion.feedback.correct}`; quizFeedback.className = 'mt-6 p-4 rounded-lg text-sm bg-green-50 text-green-800'; } else { optionElement.classList.add('incorrect'); quizFeedback.innerHTML = `<strong class="text-red-700">R√©ponse incorrecte.</strong> ${currentQuestion.feedback.incorrect}`; quizFeedback.className = 'mt-6 p-4 rounded-lg text-sm bg-red-50 text-red-800'; Array.from(quizOptions.children).forEach(child => { if (child.textContent === currentQuestion.answer) { child.classList.add('correct'); } }); } quizFeedback.style.display = 'block'; quizHintBtn.style.display = 'none'; quizNextBtn.style.display = 'block'; if (currentQuestionIndex === quizData.length - 1) { quizNextBtn.textContent = 'Voir les r√©sultats'; } else { quizNextBtn.textContent = 'Question Suivante'; } }
        function showResults() { quizContainer.style.display = 'none'; quizResultContainer.style.display = 'block'; const scorePercent = (score / quizData.length) * 100; document.getElementById('quiz-score-text').textContent = `${score} / ${quizData.length}`; let message = ''; if (scorePercent === 100) message = "Parfait ! Vous ma√Ætrisez le sujet sur le bout des doigts."; else if (scorePercent >= 75) message = "Excellent travail ! Vos connaissances sont solides."; else if (scorePercent >= 50) message = "Pas mal ! Quelques points sont √† revoir pour ma√Ætriser pleinement le sujet."; else message = "Continuez vos efforts. N'h√©sitez pas √† revoir les chapitres pour consolider vos acquis."; document.getElementById('quiz-score-message').textContent = message; }
        quizHintBtn.addEventListener('click', () => { quizHintContainer.innerHTML = `<p class="p-3 bg-yellow-50 border border-yellow-200 rounded-lg">${quizData[currentQuestionIndex].hint}</p>`; quizHintContainer.style.display = 'block'; quizHintBtn.style.display = 'none'; });
        quizNextBtn.addEventListener('click', () => { currentQuestionIndex++; if (currentQuestionIndex < quizData.length) { loadQuestion(); } else { showResults(); } });
        quizRestartBtn.addEventListener('click', startQuiz);
        if(quizContainer) { startQuiz(); }
        
        // --- Other page logic ---
        const checkCashBtn = document.getElementById('check-cash-btn'); if(checkCashBtn) { const ticketZAmount = 1254.50; document.getElementById('ticket-z-amount-text').textContent = ticketZAmount.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' }); const resultDiv = document.getElementById('cash-result'); resultDiv.className = 'p-4 rounded-lg text-center font-semibold bg-gray-100 text-gray-700'; resultDiv.textContent = 'En attente de votre comptage...'; checkCashBtn.addEventListener('click', () => { const physicalCash = parseFloat(document.getElementById('physical-cash-input').value); if (isNaN(physicalCash)) { resultDiv.className = 'p-4 rounded-lg text-center font-semibold bg-gray-100 text-gray-700'; resultDiv.textContent = 'Veuillez saisir un montant valide.'; return; } const difference = physicalCash - ticketZAmount; if (Math.abs(difference) < 0.01) { resultDiv.className = 'p-4 rounded-lg text-center font-semibold bg-green-100 text-green-800'; resultDiv.textContent = '‚úÖ Caisse Juste ! Le comptage correspond au Ticket Z.'; } else if (difference > 0) { resultDiv.className = 'p-4 rounded-lg text-center font-semibold bg-blue-100 text-blue-800'; resultDiv.textContent = `üîµ Boni de caisse de ${difference.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' })}. √Ä investiguer.`; } else { resultDiv.className = 'p-4 rounded-lg text-center font-semibold bg-red-100 text-red-800'; resultDiv.textContent = `üî¥ Mali de caisse de ${Math.abs(difference).toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' })}. Erreur ou vol √† identifier !`; } }); }
        const receivablesData = [ { client: 'Alpha SARL', num: 'FA-1023', montant: 1250, echeance: -15 }, { client: 'Beta Corp', num: 'FA-1011', montant: 8430, echeance: -42 }, { client: 'Gamma SA', num: 'FA-1025', montant: 500, echeance: 10 }, { client: 'Alpha SARL', num: 'FA-1028', montant: 750, echeance: 25 }, { client: 'Beta Corp', num: 'FA-1030', montant: 1500, echeance: -5 }, ];
        const btnEcheancier = document.getElementById('btn-echeancier'); const btnBalance = document.getElementById('btn-balance'); const container = document.getElementById('receivables-view-container');
        const renderEcheancier = () => { let html = `<p class="text-xs text-gray-500 mb-2">Liste de toutes les factures, pour un suivi quotidien.</p><table class="w-full text-sm text-left text-gray-500"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th scope="col" class="px-4 py-2">Client</th><th scope="col" class="px-4 py-2">Facture</th><th scope="col" class="px-4 py-2 text-right">Montant</th><th scope="col" class="px-4 py-2 text-right">√âch√©ance</th></tr></thead><tbody>`; receivablesData.sort((a,b) => a.echeance - b.echeance).forEach(f => { html += `<tr class="bg-white border-b"><td class="px-4 py-2 font-medium text-gray-900">${f.client}</td><td class="px-4 py-2">${f.num}</td><td class="px-4 py-2 text-right">${f.montant.toFixed(2)} ‚Ç¨</td><td class="px-4 py-2 text-right ${f.echeance < 0 ? 'text-red-600 font-bold' : 'text-green-600'}">${f.echeance < 0 ? `Retard ${Math.abs(f.echeance)} j.` : `Dans ${f.echeance} j.`}</td></tr>`; }); html += `</tbody></table>`; container.innerHTML = html; };
        const renderBalanceAgee = () => { const clientTotals = receivablesData.reduce((acc, f) => { if (!acc[f.client]) { acc[f.client] = { 'Non √©chu': 0, 'Retard 1-30j': 0, 'Retard 31-60j': 0, 'Total': 0 }; } if (f.echeance >= 0) acc[f.client]['Non √©chu'] += f.montant; else if (f.echeance >= -30) acc[f.client]['Retard 1-30j'] += f.montant; else if (f.echeance >= -60) acc[f.client]['Retard 31-60j'] += f.montant; acc[f.client]['Total'] += f.montant; return acc; }, {}); let html = `<p class="text-xs text-gray-500 mb-2">Synth√®se des retards par client et par tranche d'anciennet√©.</p><table class="w-full text-sm text-left text-gray-500"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr><th scope="col" class="px-4 py-2">Client</th><th scope="col" class="px-4 py-2 text-right">Non √©chu</th><th scope="col" class="px-4 py-2 text-right">Retard 1-30j</th><th scope="col" class="px-4 py-2 text-right">Retard 31-60j</th><th scope="col" class="px-4 py-2 text-right font-bold">Total D√ª</th></tr></thead><tbody>`; for (const client in clientTotals) { html += `<tr class="bg-white border-b"><td class="px-4 py-2 font-medium text-gray-900">${client}</td><td class="px-4 py-2 text-right">${clientTotals[client]['Non √©chu'].toFixed(2)} ‚Ç¨</td><td class="px-4 py-2 text-right font-bold text-orange-600">${clientTotals[client]['Retard 1-30j'].toFixed(2)} ‚Ç¨</td><td class="px-4 py-2 text-right font-bold text-red-600">${clientTotals[client]['Retard 31-60j'].toFixed(2)} ‚Ç¨</td><td class="px-4 py-2 text-right font-bold text-gray-900">${clientTotals[client]['Total'].toFixed(2)} ‚Ç¨</td></tr>`; } html += `</tbody></table>`; container.innerHTML = html; };
        if (btnEcheancier) { btnEcheancier.addEventListener('click', () => { btnEcheancier.classList.add('active'); btnBalance.classList.remove('active'); renderEcheancier(); }); btnBalance.addEventListener('click', () => { btnBalance.classList.add('active'); btnEcheancier.classList.remove('active'); renderBalanceAgee(); }); renderEcheancier(); }
        const escompteMontant = document.getElementById('escompte-montant'); const escompteTaux = document.getElementById('escompte-taux'); const finMontant = document.getElementById('fin-montant'); const finJours = document.getElementById('fin-jours'); const finTaux = document.getElementById('fin-taux');
        const calculateEscompte = () => { if(!escompteMontant) return; const montant = parseFloat(escompteMontant.value); const taux = parseFloat(escompteTaux.value); const resultDiv = document.getElementById('result-escompte'); if (isNaN(montant) || isNaN(taux)) { resultDiv.innerHTML = ''; return; } const reduction = montant * (taux / 100); const nouveauMontant = montant - reduction; resultDiv.innerHTML = `R√©duction : <strong>${reduction.toFixed(2)} ‚Ç¨</strong> | Net √† payer : <strong>${nouveauMontant.toFixed(2)} ‚Ç¨</strong>`; };
        const calculateAgios = () => { if(!finMontant) return; const montant = parseFloat(finMontant.value); const jours = parseInt(finJours.value); const taux = parseFloat(finTaux.value); const resultDiv = document.getElementById('result-fin'); if (isNaN(montant) || isNaN(jours) || isNaN(taux)) { resultDiv.innerHTML = ''; return; } const coutAgios = (montant * (taux / 100) * jours) / 360; resultDiv.innerHTML = `Co√ªt total des agios : <strong>${coutAgios.toFixed(2)} ‚Ç¨</strong>`; };
        [escompteMontant, escompteTaux].forEach(el => el?.addEventListener('input', calculateEscompte)); [finMontant, finJours, finTaux].forEach(el => el?.addEventListener('input', calculateAgios)); calculateEscompte(); calculateAgios();
        const clientSlider = document.getElementById('delai-client-slider'); const fournisseurSlider = document.getElementById('delai-fournisseur-slider'); const ctx = document.getElementById('impactChart')?.getContext('2d');
        if (ctx && clientSlider) { const clientValue = document.getElementById('delai-client-value'); const fournisseurValue = document.getElementById('delai-fournisseur-value'); const bfrJoursCalcul = document.getElementById('bfr-jours-calcul'); const bfrEurosCalcul = document.getElementById('bfr-euros-calcul'); const tresoCalcul = document.getElementById('treso-calcul'); const impactText = document.getElementById('impact-text'); const caAnnuel = 360000, caJournalier = caAnnuel / 360, delaiStock = 30, frng = 20000; let impactChart = new Chart(ctx, { type: 'bar', data: { labels: ['BFR', 'Tr√©sorerie Nette'], datasets: [{ label: 'Montant en ‚Ç¨', data: [0, 0], backgroundColor: ['#FDBA74', '#8D6B6A'], borderWidth: 1, borderRadius: 4 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, ticks: { callback: value => new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR', minimumFractionDigits: 0 }).format(value) } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: context => `${context.dataset.label || ''}: ${new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(context.parsed.y)}` } } } } }); function formatNumber(num) { return new Intl.NumberFormat('fr-FR').format(num); } function updateSimulation() { const delaiClient = parseInt(clientSlider.value); const delaiFournisseur = parseInt(fournisseurSlider.value); clientValue.textContent = delaiClient; fournisseurValue.textContent = delaiFournisseur; const bfrJours = delaiStock + delaiClient - delaiFournisseur; const bfrEuros = bfrJours * caJournalier; const tresorerie = frng - bfrEuros; bfrJoursCalcul.textContent = `BFR (j) = ${delaiStock}j + ${delaiClient}j - ${delaiFournisseur}j = ${bfrJours}j`; bfrEurosCalcul.textContent = `BFR (‚Ç¨) = ${bfrJours}j * ${formatNumber(caJournalier)}‚Ç¨ = ${formatNumber(bfrEuros.toFixed(0))}‚Ç¨`; tresoCalcul.textContent = `Tr√©sorerie = ${formatNumber(frng)}‚Ç¨ - ${formatNumber(bfrEuros.toFixed(0))}‚Ç¨ = ${formatNumber(tresorerie.toFixed(0))}‚Ç¨`; impactChart.data.datasets[0].data = [bfrEuros, tresorerie]; impactChart.update(); if (tresorerie >= 0) { impactText.innerHTML = `üéâ Mission R√©ussie ! Votre tr√©sorerie est exc√©dentaire.`; impactText.className = "text-center text-lg mb-6 p-4 rounded-lg font-semibold bg-green-100 text-green-800"; } else { impactText.innerHTML = `‚ö†Ô∏è Mission en cours... Votre tr√©sorerie est d√©ficitaire.`; impactText.className = "text-center text-lg mb-6 p-4 rounded-lg font-semibold bg-red-100 text-red-800"; } } clientSlider.addEventListener('input', updateSimulation); fournisseurSlider.addEventListener('input', updateSimulation); updateSimulation(); }
        const faqContainer = document.getElementById('faq-container'); if (faqContainer) { faqContainer.addEventListener('click', (e) => { const question = e.target.closest('.faq-question'); if (question) { const faqItem = question.parentElement; faqItem.classList.toggle('active'); } }); }
    });
    </script>
</body>
</html>

